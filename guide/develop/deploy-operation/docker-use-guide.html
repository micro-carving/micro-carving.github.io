<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.61" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://olinonee.com/./guide/develop/deploy-operation/docker-use-guide.html"><meta property="og:site_name" content="å­—èŠ‚å¾®é›•"><meta property="og:title" content="Docker å…¥é—¨æ•™ç¨‹"><meta property="og:description" content="ä¸€ã€docker ç®€ä»‹ 1.ä»€ä¹ˆæ˜¯ docker Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œç”±äº docker å½±å“å·¨å¤§ï¼Œä»Šå¤©ä¹Ÿç”¨ "Docker" æŒ‡ä»£å®¹å™¨åŒ–æŠ€æœ¯ã€‚ 2.docker çš„ä¼˜åŠ¿ ä¸€é”®éƒ¨ç½²ï¼Œå¼€ç®±å³ç”¨ å®¹å™¨ä½¿ç”¨åŸºäº image é•œåƒçš„éƒ¨ç½²æ¨¡å¼ï¼Œimage ä¸­åŒ…å«äº†è¿è¡Œåº”ç”¨ç¨‹åºæ‰€éœ€çš„ä¸€åˆ‡ï¼šä»£ç ã€è¿è¡Œæ—¶ã€ç³»ç»Ÿå·¥å…·ã€ç³»ç»Ÿåº“å’Œé…ç½®æ–‡ä»¶ã€‚ æ— è®ºæ˜¯å•ä¸ªç¨‹åºè¿˜æ˜¯å¤šä¸ªç¨‹åºç»„æˆçš„å¤æ‚æœåŠ¡ï¼Œæˆ–è€…åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œéƒ½å¯ä»¥ä½¿ç”¨ docker run æˆ– docker compose up å‘½ä»¤ä¸€é”®éƒ¨ç½²ï¼Œçœå»äº†å¤§é‡æ­å»ºã€é…ç½®ç¯å¢ƒã€è°ƒè¯•å’Œæ’æŸ¥é”™è¯¯çš„æ—¶é—´ã€‚"><meta property="og:type" content="article"><meta property="og:image" content="https://olinonee.com/./"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-08-07T02:16:14.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="Docker å…¥é—¨æ•™ç¨‹"><meta property="article:tag" content="ä½¿ç”¨æŒ‡å—"><meta property="article:tag" content="docker"><meta property="article:published_time" content="2022-01-03T00:00:00.000Z"><meta property="article:modified_time" content="2023-08-07T02:16:14.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Docker å…¥é—¨æ•™ç¨‹","image":["https://olinonee.com/./"],"datePublished":"2022-01-03T00:00:00.000Z","dateModified":"2023-08-07T02:16:14.000Z","author":[]}</script><title>Docker å…¥é—¨æ•™ç¨‹ | å­—èŠ‚å¾®é›•</title><meta name="description" content="ä¸€ã€docker ç®€ä»‹ 1.ä»€ä¹ˆæ˜¯ docker Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œç”±äº docker å½±å“å·¨å¤§ï¼Œä»Šå¤©ä¹Ÿç”¨ "Docker" æŒ‡ä»£å®¹å™¨åŒ–æŠ€æœ¯ã€‚ 2.docker çš„ä¼˜åŠ¿ ä¸€é”®éƒ¨ç½²ï¼Œå¼€ç®±å³ç”¨ å®¹å™¨ä½¿ç”¨åŸºäº image é•œåƒçš„éƒ¨ç½²æ¨¡å¼ï¼Œimage ä¸­åŒ…å«äº†è¿è¡Œåº”ç”¨ç¨‹åºæ‰€éœ€çš„ä¸€åˆ‡ï¼šä»£ç ã€è¿è¡Œæ—¶ã€ç³»ç»Ÿå·¥å…·ã€ç³»ç»Ÿåº“å’Œé…ç½®æ–‡ä»¶ã€‚ æ— è®ºæ˜¯å•ä¸ªç¨‹åºè¿˜æ˜¯å¤šä¸ªç¨‹åºç»„æˆçš„å¤æ‚æœåŠ¡ï¼Œæˆ–è€…åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œéƒ½å¯ä»¥ä½¿ç”¨ docker run æˆ– docker compose up å‘½ä»¤ä¸€é”®éƒ¨ç½²ï¼Œçœå»äº†å¤§é‡æ­å»ºã€é…ç½®ç¯å¢ƒã€è°ƒè¯•å’Œæ’æŸ¥é”™è¯¯çš„æ—¶é—´ã€‚">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/./assets/style-0a33fddb.css" as="style"><link rel="stylesheet" href="/./assets/style-0a33fddb.css">
    <link rel="modulepreload" href="/./assets/app-29c27af3.js"><link rel="modulepreload" href="/./assets/framework-158a71b3.js"><link rel="modulepreload" href="/./assets/docker-use-guide.html-2dada1c8.js"><link rel="modulepreload" href="/./assets/docker-use-guide.html-67692f2a.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/./" class="brand"><img class="logo" src="/./logo.gif" alt="å­—èŠ‚å¾®é›•"><!----><span class="site-name hide-in-pad">å­—èŠ‚å¾®é›•</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/./" class="nav-link" aria-label="é¦–é¡µ"><span class="font-icon icon iconfont icon-home" style=""></span>é¦–é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="ç¼–ç¨‹|å¼€å‘"><span class="title"><span class="font-icon icon iconfont icon-code" style=""></span>ç¼–ç¨‹|å¼€å‘</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/./guide/develop/front-end/" class="nav-link" aria-label="å¤§å‰ç«¯"><span class="font-icon icon iconfont icon-page" style=""></span>å¤§å‰ç«¯<!----></a></li><li class="dropdown-item"><a href="/./guide/develop/java/" class="nav-link" aria-label="Java ä½“ç³»"><span class="font-icon icon iconfont icon-java" style=""></span>Java ä½“ç³»<!----></a></li><li class="dropdown-item"><a href="/./guide/develop/data-storage/" class="nav-link" aria-label="æ•°æ®å­˜å‚¨"><span class="font-icon icon iconfont icon-storage" style=""></span>æ•°æ®å­˜å‚¨<!----></a></li><li class="dropdown-item"><a href="/./guide/develop/deploy-operation/" class="nav-link active" aria-label="éƒ¨ç½²å’Œè¿ç»´"><span class="font-icon icon iconfont icon-shell" style=""></span>éƒ¨ç½²å’Œè¿ç»´<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="æ¡†æ¶|ä¸­é—´ä»¶"><span class="title"><span class="font-icon icon iconfont icon-frame" style=""></span>æ¡†æ¶|ä¸­é—´ä»¶</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/./guide/framework/spring-all/" class="nav-link" aria-label="Spring å…¨å®¶æ¡¶"><span class="font-icon icon iconfont icon-leaf" style=""></span>Spring å…¨å®¶æ¡¶<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="é¡¹ç›®|äº§å“"><span class="title"><span class="font-icon icon iconfont icon-software" style=""></span>é¡¹ç›®|äº§å“</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/./guide/project/opensource-share/" class="nav-link" aria-label="å¼€æºå’Œè´¡çŒ®"><span class="font-icon icon iconfont icon-Apache" style=""></span>å¼€æºå’Œè´¡çŒ®<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="ç®—æ³•|åŸç†"><span class="title"><span class="font-icon icon iconfont icon-process" style=""></span>ç®—æ³•|åŸç†</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/./guide/algorithm/structure-algorithm/" class="nav-link" aria-label="æ¶æ„å’Œç®—æ³•"><span class="font-icon icon iconfont icon-structure" style=""></span>æ¶æ„å’Œç®—æ³•<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="ç”Ÿæ´»|å·¥ä½œ"><span class="title"><span class="font-icon icon iconfont icon-activity" style=""></span>ç”Ÿæ´»|å·¥ä½œ</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/./guide/life/skill-ability/" class="nav-link" aria-label="æŠ€èƒ½å’Œå®åŠ›"><span class="font-icon icon iconfont icon-ability" style=""></span>æŠ€èƒ½å’Œå®åŠ›<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="ä¸ªäºº|å›¢é˜Ÿ"><span class="title"><span class="font-icon icon iconfont icon-people" style=""></span>ä¸ªäºº|å›¢é˜Ÿ</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/./guide/management/about-me/" class="nav-link" aria-label="å…³äºè‡ªå·±"><span class="font-icon icon iconfont icon-people" style=""></span>å…³äºè‡ªå·±<!----></a></li><li class="dropdown-item"><a href="/./guide/management/about-career/" class="nav-link" aria-label="å…³äºèŒåœº"><span class="font-icon icon iconfont icon-group" style=""></span>å…³äºèŒåœº<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="è®¤çŸ¥|æå‡"><span class="title"><span class="font-icon icon iconfont icon-creative" style=""></span>è®¤çŸ¥|æå‡</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/./guide/knowledge/read-think/" class="nav-link" aria-label="é˜…è¯»å’Œæ€è€ƒ"><span class="font-icon icon iconfont icon-read" style=""></span>é˜…è¯»å’Œæ€è€ƒ<!----></a></li><li class="dropdown-item"><a href="/./guide/knowledge/tool-resource/" class="nav-link" aria-label="å·¥å…·å’Œèµ„æº"><span class="font-icon icon iconfont icon-share" style=""></span>å·¥å…·å’Œèµ„æº<!----></a></li></ul></button></div></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/micro-carving/micro-carving.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!--[--><button class="search-pro-button" role="search" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="placeholder">æœç´¢</div><div class="key-hints"><kbd class="key">Ctrl</kbd><kbd class="key">K</kbd></div></button><!--]--><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="font-icon icon iconfont icon-shell" style=""></span><span class="title">éƒ¨ç½²å’Œè¿ç»´</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/./guide/develop/deploy-operation/git-common-command.html" class="nav-link sidebar-link sidebar-page" aria-label="Git å¸¸ç”¨å‘½ä»¤"><span class="font-icon icon iconfont icon-shell" style=""></span>Git å¸¸ç”¨å‘½ä»¤<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/./guide/develop/deploy-operation/jdk-8-env-build-guide.html" class="nav-link sidebar-link sidebar-page" aria-label="Jdk8 ç¯å¢ƒæ­å»ºæŒ‡å—"><span class="font-icon icon iconfont icon-shell" style=""></span>Jdk8 ç¯å¢ƒæ­å»ºæŒ‡å—<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/./guide/develop/deploy-operation/git-contribution-submit-guide.html" class="nav-link sidebar-link sidebar-page" aria-label="Git è´¡çŒ®æäº¤è§„èŒƒ"><span class="font-icon icon iconfont icon-shell" style=""></span>Git è´¡çŒ®æäº¤è§„èŒƒ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/./guide/develop/deploy-operation/tomcat-env-build-guide.html" class="nav-link sidebar-link sidebar-page" aria-label="Tomcat ç¯å¢ƒæ­å»ºæŒ‡å—"><span class="font-icon icon iconfont icon-shell" style=""></span>Tomcat ç¯å¢ƒæ­å»ºæŒ‡å—<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/./guide/develop/deploy-operation/nginx-env-build-guide.html" class="nav-link sidebar-link sidebar-page" aria-label="Nginx ç¯å¢ƒæ­å»ºæŒ‡å—"><span class="font-icon icon iconfont icon-shell" style=""></span>Nginx ç¯å¢ƒæ­å»ºæŒ‡å—<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/./guide/develop/deploy-operation/redis-env-build-guide.html" class="nav-link sidebar-link sidebar-page" aria-label="Redis ç¯å¢ƒæ­å»ºæŒ‡å—"><span class="font-icon icon iconfont icon-shell" style=""></span>Redis ç¯å¢ƒæ­å»ºæŒ‡å—<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/./guide/develop/deploy-operation/rabbitmq-env-build-guide.html" class="nav-link sidebar-link sidebar-page" aria-label="RabbitMQ ç¯å¢ƒæ­å»ºæŒ‡å—"><span class="font-icon icon iconfont icon-shell" style=""></span>RabbitMQ ç¯å¢ƒæ­å»ºæŒ‡å—<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/./guide/develop/deploy-operation/elasticsearch-env-build-guide.html" class="nav-link sidebar-link sidebar-page" aria-label="ElasticSearch ç¯å¢ƒæ­å»ºæŒ‡å—"><span class="font-icon icon iconfont icon-shell" style=""></span>ElasticSearch ç¯å¢ƒæ­å»ºæŒ‡å—<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/./guide/develop/deploy-operation/mongodb-env-build-guide.html" class="nav-link sidebar-link sidebar-page" aria-label="MongoDB ç¯å¢ƒæ­å»ºæŒ‡å—"><span class="font-icon icon iconfont icon-shell" style=""></span>MongoDB ç¯å¢ƒæ­å»ºæŒ‡å—<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/./guide/develop/deploy-operation/zookeeper-env-build-guide.html" class="nav-link sidebar-link sidebar-page" aria-label="Zookeeper ç¯å¢ƒæ­å»ºæŒ‡å—"><span class="font-icon icon iconfont icon-shell" style=""></span>Zookeeper ç¯å¢ƒæ­å»ºæŒ‡å—<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/./guide/develop/deploy-operation/jenkins-env-build-guide.html" class="nav-link sidebar-link sidebar-page" aria-label="Jenkins ç¯å¢ƒæ­å»ºæŒ‡å—"><span class="font-icon icon iconfont icon-shell" style=""></span>Jenkins ç¯å¢ƒæ­å»ºæŒ‡å—<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/./guide/develop/deploy-operation/jenkins-use-guide.html" class="nav-link sidebar-link sidebar-page" aria-label="Jenkins æŒç»­é›†æˆä½¿ç”¨æŒ‡å—"><span class="font-icon icon iconfont icon-shell" style=""></span>Jenkins æŒç»­é›†æˆä½¿ç”¨æŒ‡å—<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="Docker å…¥é—¨æ•™ç¨‹"><span class="font-icon icon iconfont icon-shell" style=""></span>Docker å…¥é—¨æ•™ç¨‹<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#ä¸€ã€docker-ç®€ä»‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸€ã€docker ç®€ä»‹"><!---->ä¸€ã€docker ç®€ä»‹<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_1-ä»€ä¹ˆæ˜¯-docker" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.ä»€ä¹ˆæ˜¯ docker"><!---->1.ä»€ä¹ˆæ˜¯ docker<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_2-docker-çš„ä¼˜åŠ¿" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.docker çš„ä¼˜åŠ¿"><!---->2.docker çš„ä¼˜åŠ¿<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_3-å®¹å™¨ä¸è™šæ‹Ÿæœº" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.å®¹å™¨ä¸è™šæ‹Ÿæœº"><!---->3.å®¹å™¨ä¸è™šæ‹Ÿæœº<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_4-å‚è€ƒæ–‡æ¡£" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.å‚è€ƒæ–‡æ¡£"><!---->4.å‚è€ƒæ–‡æ¡£<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#äºŒã€å®‰è£…-docker" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="äºŒã€å®‰è£… docker"><!---->äºŒã€å®‰è£… docker<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_1-windows-ä¸‹å®‰è£…-docker" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.Windows ä¸‹å®‰è£… Docker"><!---->1.Windows ä¸‹å®‰è£… Docker<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_2-linux-ä¸‹å®‰è£…-docker" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.Linux ä¸‹å®‰è£… Docker"><!---->2.Linux ä¸‹å®‰è£… Docker<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#ä¸‰ã€docker-run-å¼€ç®±å³ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸‰ã€docker run å¼€ç®±å³ç”¨"><!---->ä¸‰ã€docker run å¼€ç®±å³ç”¨<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_1-docker-æ¶æ„" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.docker æ¶æ„"><!---->1.docker æ¶æ„<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_2-docker-pull-æ‹‰å–é•œåƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.docker pull æ‹‰å–é•œåƒ"><!---->2.docker pull æ‹‰å–é•œåƒ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_3-docker-run-å‘½ä»¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.docker run å‘½ä»¤"><!---->3.docker run å‘½ä»¤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_3-å¸¸ç”¨å‘½ä»¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.å¸¸ç”¨å‘½ä»¤"><!---->3.å¸¸ç”¨å‘½ä»¤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_4-å‚è€ƒæ–‡æ¡£-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.å‚è€ƒæ–‡æ¡£"><!---->4.å‚è€ƒæ–‡æ¡£<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#å››ã€docker-ç½‘ç»œ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å››ã€docker ç½‘ç»œ"><!---->å››ã€docker ç½‘ç»œ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_1-é»˜è®¤ç½‘ç»œ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.é»˜è®¤ç½‘ç»œ"><!---->1.é»˜è®¤ç½‘ç»œ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_2-ç”¨æˆ·è‡ªå®šä¹‰ç½‘ç»œ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.ç”¨æˆ·è‡ªå®šä¹‰ç½‘ç»œ"><!---->2.ç”¨æˆ·è‡ªå®šä¹‰ç½‘ç»œ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_3-ä¸»æœºåè§£æ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.ä¸»æœºåè§£æ"><!---->3.ä¸»æœºåè§£æ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_4-å‚è€ƒæ–‡æ¡£-2" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.å‚è€ƒæ–‡æ¡£"><!---->4.å‚è€ƒæ–‡æ¡£<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#äº”ã€docker-å­˜å‚¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="äº”ã€docker å­˜å‚¨"><!---->äº”ã€docker å­˜å‚¨<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_1-å­˜å‚¨æ–¹å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.å­˜å‚¨æ–¹å¼"><!---->1.å­˜å‚¨æ–¹å¼<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_2-å‚è€ƒæ–‡æ¡£" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.å‚è€ƒæ–‡æ¡£"><!---->2.å‚è€ƒæ–‡æ¡£<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#å…­ã€éƒ¨ç½²è‡ªå·±çš„åº”ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å…­ã€éƒ¨ç½²è‡ªå·±çš„åº”ç”¨"><!---->å…­ã€éƒ¨ç½²è‡ªå·±çš„åº”ç”¨<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_1-éƒ¨ç½²-mysql-å¹¶åˆå§‹åŒ–æ•°æ®åº“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.éƒ¨ç½² mysql å¹¶åˆå§‹åŒ–æ•°æ®åº“"><!---->1.éƒ¨ç½² mysql å¹¶åˆå§‹åŒ–æ•°æ®åº“<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_2-éƒ¨ç½²åº”ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.éƒ¨ç½²åº”ç”¨"><!---->2.éƒ¨ç½²åº”ç”¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_3-è§£å†³ä¹±ç é—®é¢˜" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.è§£å†³ä¹±ç é—®é¢˜"><!---->3.è§£å†³ä¹±ç é—®é¢˜<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_4-å‚è€ƒæ–‡æ¡£-3" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.å‚è€ƒæ–‡æ¡£"><!---->4.å‚è€ƒæ–‡æ¡£<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#ä¸ƒã€docker-compose-å®¹å™¨ç¼–æ’" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸ƒã€docker compose å®¹å™¨ç¼–æ’"><!---->ä¸ƒã€docker compose å®¹å™¨ç¼–æ’<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_1-ä¸€é”®éƒ¨ç½²-wordpress" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.ä¸€é”®éƒ¨ç½² wordpress"><!---->1.ä¸€é”®éƒ¨ç½² wordpress<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_2-compose-æ–‡ä»¶ç»“æ„" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.compose æ–‡ä»¶ç»“æ„"><!---->2.compose æ–‡ä»¶ç»“æ„<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_3-yaml-æ–‡ä»¶è¯­æ³•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.yaml æ–‡ä»¶è¯­æ³•"><!---->3.yaml æ–‡ä»¶è¯­æ³•<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_4-ç¼–æ’è‡ªå·±çš„é¡¹ç›®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.ç¼–æ’è‡ªå·±çš„é¡¹ç›®"><!---->4.ç¼–æ’è‡ªå·±çš„é¡¹ç›®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_5-å®¹å™¨å¯åŠ¨é¡ºåº-depends-on" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.å®¹å™¨å¯åŠ¨é¡ºåº depends_on"><!---->5.å®¹å™¨å¯åŠ¨é¡ºåº depends_on<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_6-å‚è€ƒæ–‡æ¡£" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.å‚è€ƒæ–‡æ¡£"><!---->6.å‚è€ƒæ–‡æ¡£<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#å…«ã€dockerfile-åˆ¶ä½œé•œåƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å…«ã€dockerfile åˆ¶ä½œé•œåƒ"><!---->å…«ã€dockerfile åˆ¶ä½œé•œåƒ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_1-dockerfile" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.dockerfile"><!---->1.dockerfile<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_2-åˆ¶ä½œè‡ªå·±çš„é•œåƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.åˆ¶ä½œè‡ªå·±çš„é•œåƒ"><!---->2.åˆ¶ä½œè‡ªå·±çš„é•œåƒ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_3-image-é•œåƒä¸-layer-å±‚" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.image é•œåƒä¸ layer å±‚"><!---->3.image é•œåƒä¸ layer å±‚<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_4-å¤šé˜¶æ®µæ„å»º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.å¤šé˜¶æ®µæ„å»º"><!---->4.å¤šé˜¶æ®µæ„å»º<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_5-å‚è€ƒæ–‡æ¡£" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.å‚è€ƒæ–‡æ¡£"><!---->5.å‚è€ƒæ–‡æ¡£<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#ä¹ã€ç§æœ‰ä»“åº“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¹ã€ç§æœ‰ä»“åº“"><!---->ä¹ã€ç§æœ‰ä»“åº“<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_1-docker-registry" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.docker registry"><!---->1.docker registry<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_2-harbor" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.harbor"><!---->2.harbor<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_3-ä¿å­˜ä¸åŠ è½½é•œåƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.ä¿å­˜ä¸åŠ è½½é•œåƒ"><!---->3.ä¿å­˜ä¸åŠ è½½é•œåƒ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#åã€windows-å®‰è£…-docker" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åã€windows å®‰è£… docker"><!---->åã€windows å®‰è£… docker<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_1-windows-ä¸‹å®‰è£…-docker-desktop" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.Windows ä¸‹å®‰è£… Docker Desktop"><!---->1.Windows ä¸‹å®‰è£… Docker Desktop<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_2-æ³¨æ„äº‹é¡¹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.æ³¨æ„äº‹é¡¹"><!---->2.æ³¨æ„äº‹é¡¹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_3-å‚è€ƒæ–‡æ¡£" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.å‚è€ƒæ–‡æ¡£"><!---->3.å‚è€ƒæ–‡æ¡£<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#åä¸€ã€å®‰è£…-portainer" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åä¸€ã€å®‰è£… portainer"><!---->åä¸€ã€å®‰è£… portainer<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_1-portainer" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.portainer"><!---->1.portainer<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_2-ä½¿ç”¨-docker-éƒ¨ç½²-portainer" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.ä½¿ç”¨ docker éƒ¨ç½² portainer"><!---->2.ä½¿ç”¨ docker éƒ¨ç½² portainer<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_3-é‡å¯ç­–ç•¥" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.é‡å¯ç­–ç•¥"><!---->3.é‡å¯ç­–ç•¥<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#åäºŒã€å‚è€ƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åäºŒã€å‚è€ƒ"><!---->åäºŒã€å‚è€ƒ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="font-icon icon iconfont icon-shell" style=""></span>Docker å…¥é—¨æ•™ç¨‹</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://olinonee.com" target="_blank" rel="noopener noreferrer">olinonee</a></span><span property="author" content="olinonee"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2022-01-03T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 27 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT27M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="page-category-item category4 clickable" role="navigation">deploy-operation</span><meta property="articleSection" content="deploy-operation"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><span class="page-tag-item tag3 clickable" role="navigation">ä½¿ç”¨æŒ‡å—</span><span class="page-tag-item tag2 clickable" role="navigation">docker</span><meta property="keywords" content="ä½¿ç”¨æŒ‡å—,docker"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<!----></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#ä¸€ã€docker-ç®€ä»‹" class="router-link-active router-link-exact-active toc-link level2">ä¸€ã€docker ç®€ä»‹</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_1-ä»€ä¹ˆæ˜¯-docker" class="router-link-active router-link-exact-active toc-link level3">1.ä»€ä¹ˆæ˜¯ docker</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_2-docker-çš„ä¼˜åŠ¿" class="router-link-active router-link-exact-active toc-link level3">2.docker çš„ä¼˜åŠ¿</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_3-å®¹å™¨ä¸è™šæ‹Ÿæœº" class="router-link-active router-link-exact-active toc-link level3">3.å®¹å™¨ä¸è™šæ‹Ÿæœº</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_4-å‚è€ƒæ–‡æ¡£" class="router-link-active router-link-exact-active toc-link level3">4.å‚è€ƒæ–‡æ¡£</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#äºŒã€å®‰è£…-docker" class="router-link-active router-link-exact-active toc-link level2">äºŒã€å®‰è£… docker</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_1-windows-ä¸‹å®‰è£…-docker" class="router-link-active router-link-exact-active toc-link level3">1.Windows ä¸‹å®‰è£… Docker</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_2-linux-ä¸‹å®‰è£…-docker" class="router-link-active router-link-exact-active toc-link level3">2.Linux ä¸‹å®‰è£… Docker</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#ä¸‰ã€docker-run-å¼€ç®±å³ç”¨" class="router-link-active router-link-exact-active toc-link level2">ä¸‰ã€docker run å¼€ç®±å³ç”¨</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_1-docker-æ¶æ„" class="router-link-active router-link-exact-active toc-link level3">1.docker æ¶æ„</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_2-docker-pull-æ‹‰å–é•œåƒ" class="router-link-active router-link-exact-active toc-link level3">2.docker pull æ‹‰å–é•œåƒ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_3-docker-run-å‘½ä»¤" class="router-link-active router-link-exact-active toc-link level3">3.docker run å‘½ä»¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_3-å¸¸ç”¨å‘½ä»¤" class="router-link-active router-link-exact-active toc-link level3">3.å¸¸ç”¨å‘½ä»¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_4-å‚è€ƒæ–‡æ¡£-1" class="router-link-active router-link-exact-active toc-link level3">4.å‚è€ƒæ–‡æ¡£</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#å››ã€docker-ç½‘ç»œ" class="router-link-active router-link-exact-active toc-link level2">å››ã€docker ç½‘ç»œ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_1-é»˜è®¤ç½‘ç»œ" class="router-link-active router-link-exact-active toc-link level3">1.é»˜è®¤ç½‘ç»œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_2-ç”¨æˆ·è‡ªå®šä¹‰ç½‘ç»œ" class="router-link-active router-link-exact-active toc-link level3">2.ç”¨æˆ·è‡ªå®šä¹‰ç½‘ç»œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_3-ä¸»æœºåè§£æ" class="router-link-active router-link-exact-active toc-link level3">3.ä¸»æœºåè§£æ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_4-å‚è€ƒæ–‡æ¡£-2" class="router-link-active router-link-exact-active toc-link level3">4.å‚è€ƒæ–‡æ¡£</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#äº”ã€docker-å­˜å‚¨" class="router-link-active router-link-exact-active toc-link level2">äº”ã€docker å­˜å‚¨</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_1-å­˜å‚¨æ–¹å¼" class="router-link-active router-link-exact-active toc-link level3">1.å­˜å‚¨æ–¹å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_2-å‚è€ƒæ–‡æ¡£" class="router-link-active router-link-exact-active toc-link level3">2.å‚è€ƒæ–‡æ¡£</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#å…­ã€éƒ¨ç½²è‡ªå·±çš„åº”ç”¨" class="router-link-active router-link-exact-active toc-link level2">å…­ã€éƒ¨ç½²è‡ªå·±çš„åº”ç”¨</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_1-éƒ¨ç½²-mysql-å¹¶åˆå§‹åŒ–æ•°æ®åº“" class="router-link-active router-link-exact-active toc-link level3">1.éƒ¨ç½² mysql å¹¶åˆå§‹åŒ–æ•°æ®åº“</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_2-éƒ¨ç½²åº”ç”¨" class="router-link-active router-link-exact-active toc-link level3">2.éƒ¨ç½²åº”ç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_3-è§£å†³ä¹±ç é—®é¢˜" class="router-link-active router-link-exact-active toc-link level3">3.è§£å†³ä¹±ç é—®é¢˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_4-å‚è€ƒæ–‡æ¡£-3" class="router-link-active router-link-exact-active toc-link level3">4.å‚è€ƒæ–‡æ¡£</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#ä¸ƒã€docker-compose-å®¹å™¨ç¼–æ’" class="router-link-active router-link-exact-active toc-link level2">ä¸ƒã€docker compose å®¹å™¨ç¼–æ’</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_1-ä¸€é”®éƒ¨ç½²-wordpress" class="router-link-active router-link-exact-active toc-link level3">1.ä¸€é”®éƒ¨ç½² wordpress</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_2-compose-æ–‡ä»¶ç»“æ„" class="router-link-active router-link-exact-active toc-link level3">2.compose æ–‡ä»¶ç»“æ„</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_3-yaml-æ–‡ä»¶è¯­æ³•" class="router-link-active router-link-exact-active toc-link level3">3.yaml æ–‡ä»¶è¯­æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_4-ç¼–æ’è‡ªå·±çš„é¡¹ç›®" class="router-link-active router-link-exact-active toc-link level3">4.ç¼–æ’è‡ªå·±çš„é¡¹ç›®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_5-å®¹å™¨å¯åŠ¨é¡ºåº-depends-on" class="router-link-active router-link-exact-active toc-link level3">5.å®¹å™¨å¯åŠ¨é¡ºåº depends_on</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_6-å‚è€ƒæ–‡æ¡£" class="router-link-active router-link-exact-active toc-link level3">6.å‚è€ƒæ–‡æ¡£</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#å…«ã€dockerfile-åˆ¶ä½œé•œåƒ" class="router-link-active router-link-exact-active toc-link level2">å…«ã€dockerfile åˆ¶ä½œé•œåƒ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_1-dockerfile" class="router-link-active router-link-exact-active toc-link level3">1.dockerfile</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_2-åˆ¶ä½œè‡ªå·±çš„é•œåƒ" class="router-link-active router-link-exact-active toc-link level3">2.åˆ¶ä½œè‡ªå·±çš„é•œåƒ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_3-image-é•œåƒä¸-layer-å±‚" class="router-link-active router-link-exact-active toc-link level3">3.image é•œåƒä¸ layer å±‚</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_4-å¤šé˜¶æ®µæ„å»º" class="router-link-active router-link-exact-active toc-link level3">4.å¤šé˜¶æ®µæ„å»º</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_5-å‚è€ƒæ–‡æ¡£" class="router-link-active router-link-exact-active toc-link level3">5.å‚è€ƒæ–‡æ¡£</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#ä¹ã€ç§æœ‰ä»“åº“" class="router-link-active router-link-exact-active toc-link level2">ä¹ã€ç§æœ‰ä»“åº“</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_1-docker-registry" class="router-link-active router-link-exact-active toc-link level3">1.docker registry</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_2-harbor" class="router-link-active router-link-exact-active toc-link level3">2.harbor</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_3-ä¿å­˜ä¸åŠ è½½é•œåƒ" class="router-link-active router-link-exact-active toc-link level3">3.ä¿å­˜ä¸åŠ è½½é•œåƒ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#åã€windows-å®‰è£…-docker" class="router-link-active router-link-exact-active toc-link level2">åã€windows å®‰è£… docker</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_1-windows-ä¸‹å®‰è£…-docker-desktop" class="router-link-active router-link-exact-active toc-link level3">1.Windows ä¸‹å®‰è£… Docker Desktop</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_2-æ³¨æ„äº‹é¡¹" class="router-link-active router-link-exact-active toc-link level3">2.æ³¨æ„äº‹é¡¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_3-å‚è€ƒæ–‡æ¡£" class="router-link-active router-link-exact-active toc-link level3">3.å‚è€ƒæ–‡æ¡£</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#åä¸€ã€å®‰è£…-portainer" class="router-link-active router-link-exact-active toc-link level2">åä¸€ã€å®‰è£… portainer</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_1-portainer" class="router-link-active router-link-exact-active toc-link level3">1.portainer</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_2-ä½¿ç”¨-docker-éƒ¨ç½²-portainer" class="router-link-active router-link-exact-active toc-link level3">2.ä½¿ç”¨ docker éƒ¨ç½² portainer</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#_3-é‡å¯ç­–ç•¥" class="router-link-active router-link-exact-active toc-link level3">3.é‡å¯ç­–ç•¥</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/./guide/develop/deploy-operation/docker-use-guide.html#åäºŒã€å‚è€ƒ" class="router-link-active router-link-exact-active toc-link level2">åäºŒã€å‚è€ƒ</a></li><!----><!--]--></ul></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h2 id="ä¸€ã€docker-ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€docker-ç®€ä»‹" aria-hidden="true">#</a> ä¸€ã€docker ç®€ä»‹</h2><h3 id="_1-ä»€ä¹ˆæ˜¯-docker" tabindex="-1"><a class="header-anchor" href="#_1-ä»€ä¹ˆæ˜¯-docker" aria-hidden="true">#</a> 1.ä»€ä¹ˆæ˜¯ docker</h3><p>Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œç”±äº docker å½±å“å·¨å¤§ï¼Œä»Šå¤©ä¹Ÿç”¨ &quot;Docker&quot; æŒ‡ä»£å®¹å™¨åŒ–æŠ€æœ¯ã€‚</p><h3 id="_2-docker-çš„ä¼˜åŠ¿" tabindex="-1"><a class="header-anchor" href="#_2-docker-çš„ä¼˜åŠ¿" aria-hidden="true">#</a> 2.docker çš„ä¼˜åŠ¿</h3><h4 id="ä¸€é”®éƒ¨ç½²-å¼€ç®±å³ç”¨" tabindex="-1"><a class="header-anchor" href="#ä¸€é”®éƒ¨ç½²-å¼€ç®±å³ç”¨" aria-hidden="true">#</a> ä¸€é”®éƒ¨ç½²ï¼Œå¼€ç®±å³ç”¨</h4><p>å®¹å™¨ä½¿ç”¨åŸºäº image é•œåƒçš„éƒ¨ç½²æ¨¡å¼ï¼Œimage ä¸­åŒ…å«äº†è¿è¡Œåº”ç”¨ç¨‹åºæ‰€éœ€çš„ä¸€åˆ‡ï¼šä»£ç ã€è¿è¡Œæ—¶ã€ç³»ç»Ÿå·¥å…·ã€ç³»ç»Ÿåº“å’Œé…ç½®æ–‡ä»¶ã€‚</p><p>æ— è®ºæ˜¯å•ä¸ªç¨‹åºè¿˜æ˜¯å¤šä¸ªç¨‹åºç»„æˆçš„å¤æ‚æœåŠ¡ï¼Œæˆ–è€…åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œéƒ½å¯ä»¥ä½¿ç”¨ <code>docker run</code> æˆ– <code>docker compose up</code> å‘½ä»¤ä¸€é”®éƒ¨ç½²ï¼Œçœå»äº†å¤§é‡æ­å»ºã€é…ç½®ç¯å¢ƒã€è°ƒè¯•å’Œæ’æŸ¥é”™è¯¯çš„æ—¶é—´ã€‚</p><h4 id="ä¸€æ¬¡æ‰“åŒ…-åˆ°å¤„è¿è¡Œ" tabindex="-1"><a class="header-anchor" href="#ä¸€æ¬¡æ‰“åŒ…-åˆ°å¤„è¿è¡Œ" aria-hidden="true">#</a> ä¸€æ¬¡æ‰“åŒ…ï¼Œåˆ°å¤„è¿è¡Œ</h4><p>Docker ä¸ºå®¹å™¨åˆ›å»ºäº†è¡Œä¸šæ ‡å‡†ï¼Œä½¿å®¹å™¨æˆä¸ºäº†è½¯ä»¶äº¤ä»˜è¿‡ç¨‹ä¸­çš„ä¸€ç§æ ‡å‡†åŒ–æ ¼å¼ï¼Œå°†è½¯æ‰“åŒ…æˆå®¹å™¨é•œ (image)ï¼Œèƒ½å¤Ÿä½¿è½¯ä»¶åœ¨ä¸åŒç¯å¢ƒä¸‹è¿è¡Œä¸€è‡´ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥å¿«é€Ÿå¯é åœ°ä»ä¸€ä¸ªç¯å¢ƒç§»æ¤åˆ°å¦å¤–ä¸€ä¸ªç¯å¢ƒï¼Œå¹¶ç¡®ä¿åœ¨æ‰€æœ‰çš„éƒ¨ç½²ç›®æ ‡ï¼ˆä¾‹å¦‚å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒï¼‰ä¸Šéƒ½æŒ‰é¢„æœŸè¿è¡Œï¼Œä»è€Œé¿å…äº† â€œåœ¨æˆ‘ç”µè„‘ä¸Šæ˜¯å¥½çš„ï¼Œæ€ä¹ˆåˆ°ä½ é‚£å´ä¸èƒ½ç”¨äº†ï¼Ÿâ€ çš„é—®é¢˜ã€‚</p><h3 id="_3-å®¹å™¨ä¸è™šæ‹Ÿæœº" tabindex="-1"><a class="header-anchor" href="#_3-å®¹å™¨ä¸è™šæ‹Ÿæœº" aria-hidden="true">#</a> 3.å®¹å™¨ä¸è™šæ‹Ÿæœº</h3><p>å®¹å™¨åŒ…æ‹¬åº”ç”¨ç¨‹åºåŠå…¶æ‰€æœ‰ä¾èµ–é¡¹ã€‚å®¹å™¨è¿è¡Œæ—¶ï¼Œä¸å®¿ä¸»æœºå…±äº«æ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œå®¹å™¨åœ¨ Linux å†…æ ¸å±‚é¢ï¼ˆä½¿ç”¨ <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Resource_Management_Guide/ch01.html" target="_blank" rel="noopener noreferrer">Cgroups<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å’Œ <a href="https://lwn.net/Articles/528078/" target="_blank" rel="noopener noreferrer">namespaces<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼‰æ¥å®ç°è¿›ç¨‹é—´çš„éš”ç¦»ï¼Œå®¹å™¨åœ¨ä¸»æœºæ“ä½œç³»ç»Ÿä¸Šçš„ç”¨æˆ·ç©ºé—´ä¸­ä½œä¸ºç‹¬ç«‹è¿›ç¨‹è¿è¡Œã€‚</p><p>å› æ­¤ï¼Œå®¹å™¨ç›¸æ¯”äºè™šæ‹Ÿæœºæ›´åŠ è½»é‡åŒ–ï¼Œå®ƒä½“ç§¯å°ï¼Œå¯åŠ¨å¿«ï¼Œå ç”¨èµ„æºå°‘ï¼Œæ€§èƒ½å¥½ã€‚</p><p>è™šæ‹Ÿæœºä½¿ç”¨è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œåº”ç”¨ç¨‹åºè¿è¡Œåœ¨å®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼ˆOSï¼‰ä¹‹ä¸Šï¼Œå› æ­¤å ç”¨çš„èµ„æºæ›´å¤šï¼Œå®‰è£…æ›´å¤æ‚ã€‚</p><p>ä½†æ˜¯ç”±äºå®¹å™¨ä¸å®¿ä¸»æœºå…±äº«å†…æ ¸ï¼Œæ‰€ä»¥åœ¨éš”ç¦»æ€§å’Œå®‰å…¨æ€§æ–¹é¢ä¸å¦‚è™šæ‹Ÿæœºã€‚</p><figure><img src="/assets/docker-use-guide-1-c00e990d.png" alt="å®¹å™¨å’Œè™šæ‹ŸæœºåŒºåˆ«" tabindex="0" loading="lazy"><figcaption>å®¹å™¨å’Œè™šæ‹ŸæœºåŒºåˆ«</figcaption></figure><h3 id="_4-å‚è€ƒæ–‡æ¡£" tabindex="-1"><a class="header-anchor" href="#_4-å‚è€ƒæ–‡æ¡£" aria-hidden="true">#</a> 4.å‚è€ƒæ–‡æ¡£</h3><ul><li><a href="https://www.docker.com/resources/what-container/#/package_software" target="_blank" rel="noopener noreferrer">https://www.docker.com/resources/what-container/#/package_software<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://docs.docker.com/engine/security/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/engine/security/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="äºŒã€å®‰è£…-docker" tabindex="-1"><a class="header-anchor" href="#äºŒã€å®‰è£…-docker" aria-hidden="true">#</a> äºŒã€å®‰è£… docker</h2><h3 id="_1-windows-ä¸‹å®‰è£…-docker" tabindex="-1"><a class="header-anchor" href="#_1-windows-ä¸‹å®‰è£…-docker" aria-hidden="true">#</a> 1.Windows ä¸‹å®‰è£… Docker</h3><blockquote><p><strong>æ³¨æ„äº‹é¡¹</strong></p><p>å®¹å™¨ä¸»è¦ä½¿ç”¨ Linux å†…æ ¸æŠ€æœ¯ï¼Œå› æ­¤ windows ä¸‹å®‰è£… docker å¯èƒ½ä¼šæœ‰é‡åˆ°å„ç§é—®é¢˜ï¼Œå»ºè®®åˆšå…¥é—¨çš„åŒå­¦å…ˆåœ¨ Linux è™šæ‹Ÿæœºé‡Œå®‰è£… dockerï¼Œå­¦å®Œä¹‹ååœ¨ windows ä¸‹å®‰è£…ï¼Œå…å¾—é‡åˆ°é—®é¢˜åï¼Œè¿˜æ²¡å…¥é—¨å°±æ”¾å¼ƒäº†ã€‚</p></blockquote><h3 id="_2-linux-ä¸‹å®‰è£…-docker" tabindex="-1"><a class="header-anchor" href="#_2-linux-ä¸‹å®‰è£…-docker" aria-hidden="true">#</a> 2.Linux ä¸‹å®‰è£… Docker</h3><p>å®‰è£…ç¯å¢ƒï¼šCentOS 7.3+</p><p>å¦‚æœä¹‹å‰å®‰è£…äº†æ—§ç‰ˆ dockerï¼Œè¯·å…ˆåˆ é™¤ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># ç§»é™¤è‡ªå¸¦çš„ docker</span>
<span class="token function">sudo</span> yum remove <span class="token function">docker</span> <span class="token punctuation">\</span>
                  docker-client <span class="token punctuation">\</span>
                  docker-client-latest <span class="token punctuation">\</span>
                  docker-common <span class="token punctuation">\</span>
                  docker-latest <span class="token punctuation">\</span>
                  docker-latest-logrotate <span class="token punctuation">\</span>
                  docker-logrotate <span class="token punctuation">\</span>
                  docker-engine
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®‰è£…ä»“åº“</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">## å®‰è£… yum å·¥å…·åŒ…</span>
<span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils

<span class="token comment">## æ·»åŠ  docker ä»“åº“</span>
<span class="token function">sudo</span> yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®‰è£… docker engine</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> yum <span class="token function">install</span> docker-ce docker-ce-cli containerd.io docker-compose-plugin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p><strong>è¯´æ˜</strong></p><p><strong>docker-ce</strong>ï¼šæœåŠ¡ç«¯ <br><strong>docker-ce-cli</strong>ï¼šå®¢æˆ·ç«¯ <br> å®¢æˆ·ç«¯å‘å‡ºçš„æŒ‡ä»¤äº¤ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯å¹¶ä¸ç›´æ¥åˆ›å»ºå®¹å™¨ï¼Œè€Œæ˜¯äº¤ç»™ <code>containerd.in</code> åˆ›å»ºå®¹å™¨ï¼Œé”€æ¯è¿è¡Œå®¹å™¨ <br><strong>docker-compose-plugin</strong>ï¼šå®¹å™¨ç¼–æ’å·¥å…· <br></p></blockquote><p>å¯åŠ¨ dockerï¼Œè¿è¡Œ hello world æŸ¥çœ‹æ˜¯å¦æˆåŠŸ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl start <span class="token function">docker</span>
<span class="token function">sudo</span> <span class="token function">docker</span> run hello-world
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>é…ç½®å›½å†…é•œåƒä»“åº“åœ°å€</p><p>æ–°å»º <code>/etc/docker/daemon.json</code> æ–‡ä»¶ï¼Œè¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;registry-mirrors&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;https://registry.docker-cn.com&quot;</span>,
    <span class="token string">&quot;https://hub-mirror.c.163.com&quot;</span>,
    <span class="token string">&quot;https://fsp2sfpr.mirror.aliyuncs.com/&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åé‡å¯ï¼Œé…ç½®å¼€æœºå¯åŠ¨</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl restart <span class="token function">docker</span>
<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span>
<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> containerd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¸‰ã€docker-run-å¼€ç®±å³ç”¨" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€docker-run-å¼€ç®±å³ç”¨" aria-hidden="true">#</a> ä¸‰ã€<code>docker run</code> å¼€ç®±å³ç”¨</h2><h3 id="_1-docker-æ¶æ„" tabindex="-1"><a class="header-anchor" href="#_1-docker-æ¶æ„" aria-hidden="true">#</a> 1.docker æ¶æ„</h3><figure><img src="/assets/docker-use-guide-2-2b1c5a04.png" alt="Docker æ¶æ„" tabindex="0" loading="lazy"><figcaption>Docker æ¶æ„</figcaption></figure><h4 id="registry-é•œåƒä»“åº“" tabindex="-1"><a class="header-anchor" href="#registry-é•œåƒä»“åº“" aria-hidden="true">#</a> registry é•œåƒä»“åº“</h4><p>registry å¯ä»¥ç†è§£ä¸ºé•œåƒä»“åº“ï¼Œç”¨äºä¿å­˜ docker imageã€‚</p><p>Docker Hub æ˜¯ docker å®˜æ–¹çš„é•œåƒä»“åº“ï¼Œdocker å‘½ä»¤é»˜è®¤ä» docker hub ä¸­æ‹‰å–é•œåƒã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æ­å»ºè‡ªå·±çš„é•œåƒä»“åº“ã€‚</p><h4 id="image-é•œåƒ" tabindex="-1"><a class="header-anchor" href="#image-é•œåƒ" aria-hidden="true">#</a> image é•œåƒ</h4><p>image å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªåªè¯»çš„åº”ç”¨æ¨¡æ¿ã€‚image åŒ…å«äº†åº”ç”¨ç¨‹åºåŠå…¶æ‰€éœ€è¦çš„ä¾èµ–ç¯å¢ƒï¼Œä¾‹å¦‚å¯æ‰§è¡Œæ–‡ä»¶ã€ç¯å¢ƒå˜é‡ã€åˆå§‹åŒ–è„šæœ¬ã€å¯åŠ¨å‘½ä»¤ç­‰ã€‚</p><h4 id="container-å®¹å™¨" tabindex="-1"><a class="header-anchor" href="#container-å®¹å™¨" aria-hidden="true">#</a> container å®¹å™¨</h4><p>å®¹å™¨æ˜¯ image çš„ä¸€ä¸ªè¿è¡Œå®ä¾‹ã€‚å½“æˆ‘ä»¬è¿è¡Œä¸€ä¸ª imageï¼Œå°±åˆ›å»ºäº†ä¸€ä¸ªå®¹å™¨ã€‚</p><h3 id="_2-docker-pull-æ‹‰å–é•œåƒ" tabindex="-1"><a class="header-anchor" href="#_2-docker-pull-æ‹‰å–é•œåƒ" aria-hidden="true">#</a> 2.docker pull æ‹‰å–é•œåƒ</h3><p>ä»é•œåƒä»“åº“æ‹‰å–é•œåƒåˆ°æœ¬åœ°</p><p><code>docker pull nginx</code> ä¸å†™é»˜è®¤æ˜¯ <code>latest</code></p><p><code>docker pull nginx:latest</code></p><p><code>docker pull nginx:1.22</code></p><p><code>docker pull nginx:1.22.0-alpine</code></p><p>ä¸€èˆ¬ä¸å»ºè®®ä½¿ç”¨ <code>latest</code>ï¼Œå› ä¸ºæœ€æ–°çš„é•œåƒæ˜¯æ»šåŠ¨æ›´æ–°çš„ï¼Œè¿‡ä¸€æ®µæ—¶é—´ï¼Œå¯èƒ½è·Ÿä½ æœ¬åœ°çš„ä¸æ˜¯åŒä¸€ä¸ªã€‚</p><p>ä½¿ç”¨ <code>docker images</code> å‘½ä»¤æŸ¥çœ‹æœ¬åœ°é•œåƒ</p><h3 id="_3-docker-run-å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_3-docker-run-å‘½ä»¤" aria-hidden="true">#</a> 3.docker run å‘½ä»¤</h3><p>æ ¼å¼ï¼š<code>docker run [å¯é€‰å‚æ•°] é•œåƒå:ç‰ˆæœ¬ []</code></p><h4 id="å…¬å¼€ç«¯å£-p" tabindex="-1"><a class="header-anchor" href="#å…¬å¼€ç«¯å£-p" aria-hidden="true">#</a> å…¬å¼€ç«¯å£ (-p)</h4><p><code>docker run --name some-nginx -d -p 8080:80 nginx:1.22</code></p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå®¹å™¨æ— æ³•é€šè¿‡å¤–éƒ¨ç½‘ç»œè®¿é—®ã€‚</p><p>éœ€è¦ä½¿ç”¨ <code>-p</code> å‚æ•°å°†å®¹å™¨çš„ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºç«¯å£ï¼Œæ‰å¯ä»¥é€šè¿‡å®¿ä¸»æœº IP è¿›è¡Œè®¿é—®ã€‚</p><p>æµè§ˆå™¨æ‰“å¼€ <code>http://å®¿ä¸»æœºIP:8080</code></p><figure><img src="/assets/docker-use-guide-3-dc69806f.png" alt="Nginx" tabindex="0" loading="lazy"><figcaption>Nginx</figcaption></figure><p><code>-p 8080-8090:8080-8090</code> å…¬å¼€ç«¯å£èŒƒå›´ï¼Œå‰åå¿…é¡»å¯¹åº”</p><p><code>-p 192.168.56.106:8080:80</code> å¦‚æœå®¿ä¸»æœºæœ‰å¤šä¸ª ipï¼Œå¯ä»¥æŒ‡å®šç»‘å®šåˆ°å“ªä¸ª ip</p><h4 id="åå°è¿è¡Œ" tabindex="-1"><a class="header-anchor" href="#åå°è¿è¡Œ" aria-hidden="true">#</a> åå°è¿è¡Œ</h4><p><code>docker run --name db-mysql -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7</code></p><p>ä½¿ç”¨ run å‘½ä»¤ï¼Œéƒ¨ç½² mysqlï¼Œdocker å…ˆå»æœ¬åœ°æŸ¥æ‰¾é•œåƒï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±å» docker hub ä¸­æ‹‰å–é•œåƒ</p><ul><li><code>--name</code>ï¼šå®šä¹‰å®¹å™¨çš„åç§°</li><li><code>-e</code>ï¼šå£°æ˜ç¯å¢ƒå˜é‡</li><li><code>-d</code>ï¼šå®¹å™¨åœ¨åå°è¿è¡Œ</li></ul><p>æŸ¥çœ‹å®¹å™¨ ip</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> inspect db-mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ“ä½œå®¹å™¨ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">## å¯åŠ¨ db-mysql å®¹å™¨</span>
<span class="token function">docker</span> start db-mysql
<span class="token comment">## å…³é—­å®¹å™¨</span>
<span class="token function">docker</span> stop db-mysql
<span class="token comment">## é‡å¯å®¹å™¨</span>
<span class="token function">docker</span> restart db-mysql
<span class="token comment">## åˆ é™¤å®¹å™¨</span>
<span class="token function">docker</span> <span class="token function">rm</span> db-mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å‰å°äº¤äº’è¿è¡Œ" tabindex="-1"><a class="header-anchor" href="#å‰å°äº¤äº’è¿è¡Œ" aria-hidden="true">#</a> å‰å°äº¤äº’è¿è¡Œ</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">## åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨ï¼Œä½¿ç”¨ mysql å®¢æˆ·ç«¯</span>

<span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">--rm</span> mysql:5.7 mysql <span class="token parameter variable">-h127.0.0.1</span> <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>è¯´æ˜</strong></p><p><strong>-it</strong>ï¼šä½¿ç”¨äº¤äº’æ¨¡å¼ï¼Œå¯ä»¥åœ¨æ§åˆ¶å°é‡Œè¾“å…¥ã€è¾“å‡º <br><strong>--rm</strong>ï¼šåœ¨å®¹å™¨é€€å‡ºæ—¶è‡ªåŠ¨åˆ é™¤å®¹å™¨ã€‚ä¸€èˆ¬åœ¨ä½¿ç”¨å®¢æˆ·ç«¯ç¨‹åºæ—¶ä½¿ç”¨æ­¤å‚æ•°ã€‚å¦‚æœæ¯æ¬¡ä½¿ç”¨å®¢æˆ·ç«¯éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨ï¼Œè¿™æ ·å°†å ç”¨å¤§é‡çš„ç³»ç»Ÿç©ºé—´ã€‚<br><strong>mysql -h127.0.0.1 -uroot -p</strong>ï¼šè¡¨ç¤ºå¯åŠ¨å®¹å™¨æ—¶æ‰§è¡Œçš„å‘½ä»¤ã€‚<br></p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">## è¿›å…¥ db-mysql å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> db-mysql /bin/bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>è¯´æ˜</strong></p><p><strong>docker exec</strong>ï¼šåœ¨è¿è¡Œçš„å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤ï¼Œä¸€èˆ¬é…åˆ <strong>-it</strong> å‚æ•°ä½¿ç”¨äº¤äº’æ¨¡å¼</p></blockquote><h3 id="_3-å¸¸ç”¨å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_3-å¸¸ç”¨å‘½ä»¤" aria-hidden="true">#</a> 3.å¸¸ç”¨å‘½ä»¤</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">## æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨</span>
<span class="token function">docker</span> <span class="token function">ps</span>
<span class="token comment">## æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ŒåŒ…æ‹¬æ­£åœ¨è¿è¡Œå’Œåœæ­¢çš„</span>
<span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-a</span> 
<span class="token comment">## æŸ¥çœ‹æŒ‡å®šå®¹å™¨çš„ä¿¡æ¯</span>
<span class="token function">docker</span> inspect <span class="token punctuation">[</span>å®¹å™¨åæˆ–è€…å®¹å™¨ ID<span class="token punctuation">]</span>
<span class="token comment">## æŸ¥çœ‹æŒ‡å®šå®¹å™¨æ—¥å¿—</span>
<span class="token function">docker</span> logs <span class="token punctuation">[</span>å®¹å™¨åæˆ–è€…å®¹å™¨ ID<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">## åœ¨å®¹å™¨å’Œå®¿ä¸»æœºé—´å¤åˆ¶æ–‡ä»¶</span>

<span class="token comment">## ä»å®¿ä¸»æœºå¤åˆ¶åˆ°å®¹å™¨ä¸­</span>
<span class="token function">docker</span> <span class="token function">cp</span> ./some_file å®¹å™¨å:/work
<span class="token comment">## ä»å®¹å™¨ä¸­å¤åˆ¶åˆ°å®¿ä¸»æœº</span>
<span class="token function">docker</span> <span class="token function">cp</span> å®¹å™¨å:/var/logs/ /tmp/app_logs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-å‚è€ƒæ–‡æ¡£-1" tabindex="-1"><a class="header-anchor" href="#_4-å‚è€ƒæ–‡æ¡£-1" aria-hidden="true">#</a> 4.å‚è€ƒæ–‡æ¡£</h3><ul><li><a href="https://docs.docker.com/get-started/overview/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/get-started/overview/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://docs.docker.com/engine/reference/run/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/engine/reference/run/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="å››ã€docker-ç½‘ç»œ" tabindex="-1"><a class="header-anchor" href="#å››ã€docker-ç½‘ç»œ" aria-hidden="true">#</a> å››ã€docker ç½‘ç»œ</h2><h3 id="_1-é»˜è®¤ç½‘ç»œ" tabindex="-1"><a class="header-anchor" href="#_1-é»˜è®¤ç½‘ç»œ" aria-hidden="true">#</a> 1.é»˜è®¤ç½‘ç»œ</h3><p>docker ä¼šè‡ªåŠ¨åˆ›å»ºä¸‰ä¸ªç½‘ç»œï¼Œ<code>bridge</code> , <code>host</code>, <code>none</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">## æŸ¥çœ‹åˆ›å»ºçš„ç½‘ç»œ</span>
<span class="token function">docker</span> network <span class="token function">ls</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/assets/docker-use-guide-4-3fb13db6.png" alt="æŸ¥çœ‹ docker ç½‘ç»œ" tabindex="0" loading="lazy"><figcaption>æŸ¥çœ‹ docker ç½‘ç»œ</figcaption></figure><ul><li><strong>bridge</strong></li></ul><p>å¦‚æœä¸æŒ‡å®šï¼Œæ–°åˆ›å»ºçš„å®¹å™¨é»˜è®¤å°†è¿æ¥åˆ° bridgeï¼ˆæ¡¥æ¥ç½‘ç»œï¼‰ ç½‘ç»œã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨ bridge ç½‘ç»œï¼Œå®¿ä¸»æœºå¯ä»¥ ping é€šå®¹å™¨ IPï¼Œå®¹å™¨ä¸­ä¹Ÿèƒ½ ping é€šå®¿ä¸»æœºã€‚</p><p>å®¹å™¨ä¹‹é—´åªèƒ½é€šè¿‡ IP åœ°å€ç›¸äº’è®¿é—®ï¼Œç”±äºå®¹å™¨çš„ IP ä¼šéšç€å¯åŠ¨é¡ºåºå‘ç”Ÿå˜åŒ–ï¼Œå› æ­¤ä¸æ¨èä½¿ç”¨ IP è®¿é—®ã€‚</p><ul><li><strong>host</strong></li></ul><blockquote><p><strong>è¯´æ˜</strong></p><p>æ…ç”¨ï¼Œå¯èƒ½ä¼šæœ‰å®‰å…¨é—®é¢˜ã€‚</p></blockquote><p>å®¹å™¨ä¸å®¿ä¸»æœºå…±äº«ç½‘ç»œï¼Œä¸éœ€è¦æ˜ å°„ç«¯å£å³å¯é€šè¿‡å®¿ä¸»æœº IP è®¿é—®ã€‚ï¼ˆ-p é€‰é¡¹ä¼šè¢«å¿½ç•¥ï¼‰</p><p>ä¸»æœºæ¨¡å¼ç½‘ç»œå¯ç”¨äºä¼˜åŒ–æ€§èƒ½ï¼Œåœ¨å®¹å™¨éœ€è¦å¤„ç†å¤§é‡ç«¯å£çš„æƒ…å†µä¸‹ï¼Œå®ƒä¸éœ€è¦ç½‘ç»œåœ°å€è½¬æ¢ï¼ˆNATï¼‰ï¼Œå¹¶ä¸”ä¸ä¼šä¸ºæ¯ä¸ªç«¯å£åˆ›å»º â€œç”¨æˆ·ç©ºé—´ä»£ç†â€ã€‚</p><ul><li><strong>none</strong></li></ul><p>ç¦ç”¨å®¹å™¨ä¸­æ‰€ç”¨ç½‘ç»œï¼Œåœ¨å¯åŠ¨å®¹å™¨æ—¶ä½¿ç”¨ã€‚</p><h3 id="_2-ç”¨æˆ·è‡ªå®šä¹‰ç½‘ç»œ" tabindex="-1"><a class="header-anchor" href="#_2-ç”¨æˆ·è‡ªå®šä¹‰ç½‘ç»œ" aria-hidden="true">#</a> 2.ç”¨æˆ·è‡ªå®šä¹‰ç½‘ç»œ</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">## åˆ›å»ºç”¨æˆ·è‡ªå®šä¹‰ç½‘ç»œ</span>
<span class="token function">docker</span> network create my-net

<span class="token comment">## å°†å·²æœ‰å®¹å™¨è¿æ¥åˆ°æ­¤ç½‘ç»œ</span>
<span class="token function">docker</span> network connect my-net db-mysql

<span class="token comment">## åˆ›å»ºå®¹å™¨æ—¶æŒ‡å®šç½‘ç»œ</span>
<span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">--rm</span> <span class="token parameter variable">--network</span> my-net mysql:5.7 mysql -hdb-mysql <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ç”¨æˆ·è‡ªå®šä¹‰ç½‘ç»œä¸Šï¼Œå®¹å™¨ä¹‹é—´å¯ä»¥é€šè¿‡å®¹å™¨åè¿›è¡Œè®¿é—®ã€‚</p><p>ç”¨æˆ·è‡ªå®šä¹‰ç½‘ç»œä½¿ç”¨ Docker çš„åµŒå…¥å¼ DNS æœåŠ¡å™¨å°†å®¹å™¨åè§£ææˆ IPã€‚</p><h3 id="_3-ä¸»æœºåè§£æ" tabindex="-1"><a class="header-anchor" href="#_3-ä¸»æœºåè§£æ" aria-hidden="true">#</a> 3.ä¸»æœºåè§£æ</h3><h4 id="hostname" tabindex="-1"><a class="header-anchor" href="#hostname" aria-hidden="true">#</a> hostname</h4><p>å®¹å™¨çš„ hostname é»˜è®¤ä¸ºå®¹å™¨çš„ IDã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">## å¯åŠ¨å®¹å™¨ï¼Œä½¿ç”¨æŒ‡å®š hostname</span>
<span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">-d</span> <span class="token parameter variable">--hostname</span> my-alpine <span class="token parameter variable">--name</span> my-alpine  alpine:3.15

<span class="token comment">## æŸ¥çœ‹å®¹å™¨ä¿¡æ¯</span>
<span class="token function">docker</span> inspect <span class="token parameter variable">--format</span><span class="token operator">=</span><span class="token string">&#39;{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}&#39;</span> my-alpine
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/assets/docker-use-guide-5-5a707454.png" alt="æŸ¥çœ‹å®¹å™¨ä¿¡æ¯" tabindex="0" loading="lazy"><figcaption>æŸ¥çœ‹å®¹å™¨ä¿¡æ¯</figcaption></figure><h4 id="etc-hosts" tabindex="-1"><a class="header-anchor" href="#etc-hosts" aria-hidden="true">#</a> /etc/hosts</h4><p>åœ¨å®¹å™¨å†…æ‰‹åŠ¨ä¿®æ”¹ <code>/etc/hosts</code> æ–‡ä»¶ï¼Œå®¹å™¨é‡å¯åä¼šæ¢å¤é»˜è®¤é…ç½®ã€‚</p><p>è¦ä½¿ <code>/etc/hosts</code> ä¿®æ”¹ç”Ÿæ•ˆï¼Œä½¿ç”¨ <code>--add-host</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run --add-host<span class="token operator">=</span>my-alpine:172.17.0.3 <span class="token parameter variable">-it</span> <span class="token parameter variable">--rm</span> alpine:3.15
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_4-å‚è€ƒæ–‡æ¡£-2" tabindex="-1"><a class="header-anchor" href="#_4-å‚è€ƒæ–‡æ¡£-2" aria-hidden="true">#</a> 4.å‚è€ƒæ–‡æ¡£</h3><ul><li><a href="https://docs.docker.com/network/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/network/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://docs.docker.com/network/bridge/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/network/bridge/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://docs.docker.com/config/containers/container-networking/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/config/containers/container-networking/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://docs.docker.com/network/network-tutorial-standalone/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/network/network-tutorial-standalone/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="äº”ã€docker-å­˜å‚¨" tabindex="-1"><a class="header-anchor" href="#äº”ã€docker-å­˜å‚¨" aria-hidden="true">#</a> äº”ã€docker å­˜å‚¨</h2><p>å°†æ•°æ®å­˜å‚¨åœ¨å®¹å™¨ä¸­ï¼Œä¸€æ—¦å®¹å™¨è¢«åˆ é™¤ï¼Œæ•°æ®ä¹Ÿä¼šè¢«åˆ é™¤ã€‚åŒæ—¶ä¹Ÿä¼šä½¿å®¹å™¨å˜å¾—è¶Šæ¥è¶Šå¤§ï¼Œä¸æ–¹ä¾¿æ¢å¤å’Œè¿ç§»ã€‚</p><p>å°†æ•°æ®å­˜å‚¨åˆ°å®¹å™¨ä¹‹å¤–ï¼Œè¿™æ ·åˆ é™¤å®¹å™¨ä¹Ÿä¸ä¼šä¸¢å¤±æ•°æ®ã€‚ä¸€æ—¦å®¹å™¨æ•…éšœï¼Œæˆ‘ä»¬å¯ä»¥é‡æ–°åˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼Œå°†æ•°æ®æŒ‚è½½åˆ°å®¹å™¨é‡Œï¼Œå°±å¯ä»¥å¿«é€Ÿçš„æ¢å¤ã€‚</p><h3 id="_1-å­˜å‚¨æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_1-å­˜å‚¨æ–¹å¼" aria-hidden="true">#</a> 1.å­˜å‚¨æ–¹å¼</h3><p>docker æä¾›äº†ä»¥ä¸‹å­˜å‚¨é€‰é¡¹</p><figure><img src="/assets/docker-use-guide-6-88fa09bb.png" alt="Docker å­˜å‚¨æ–¹å¼" tabindex="0" loading="lazy"><figcaption>Docker å­˜å‚¨æ–¹å¼</figcaption></figure><ul><li><strong>volume å·</strong></li></ul><p>å·å­˜å‚¨åœ¨ä¸»æœºæ–‡ä»¶ç³»ç»Ÿåˆ†é…ä¸€å—ä¸“æœ‰å­˜å‚¨åŒºåŸŸï¼Œç”± Dockerï¼ˆåœ¨ Linux ä¸Šï¼‰ç®¡ç†ï¼Œå¹¶ä¸”ä¸ä¸»æœºçš„æ ¸å¿ƒåŠŸèƒ½éš”ç¦»ã€‚é Docker è¿›ç¨‹ä¸èƒ½ä¿®æ”¹æ–‡ä»¶ç³»ç»Ÿçš„è¿™ä¸€éƒ¨åˆ†ã€‚å·æ˜¯åœ¨ Docker ä¸­æŒä¹…ä¿å­˜æ•°æ®çš„æœ€ä½³æ–¹å¼ã€‚</p><ul><li><strong>bind mount ç»‘å®šæŒ‚è½½</strong></li></ul><p>ç»‘å®šæŒ‚è½½å¯ä»¥å°†ä¸»æœºæ–‡ä»¶ç³»ç»Ÿä¸Šç›®å½•æˆ–æ–‡ä»¶è£…è½½åˆ°å®¹å™¨ä¸­ï¼Œä½†æ˜¯ä¸»æœºä¸Šçš„é Docker è¿›ç¨‹å¯ä»¥ä¿®æ”¹å®ƒä»¬ï¼ŒåŒæ—¶åœ¨å®¹å™¨ä¸­ä¹Ÿå¯ä»¥æ›´æ”¹ä¸»æœºæ–‡ä»¶ç³»ç»Ÿï¼ŒåŒ…æ‹¬åˆ›å»ºã€ä¿®æ”¹æˆ–åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•ï¼Œä½¿ç”¨ä¸å½“ï¼Œå¯èƒ½ä¼šå¸¦æ¥å®‰å…¨éšæ‚£ã€‚</p><ul><li><strong>tmpfs ä¸´æ—¶æŒ‚è½½</strong></li></ul><p>tmpfs æŒ‚è½½ä»…å­˜å‚¨åœ¨ä¸»æœºç³»ç»Ÿçš„å†…å­˜ä¸­ï¼Œä»ä¸å†™å…¥ä¸»æœºç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿã€‚å½“å®¹å™¨åœæ­¢æ—¶ï¼Œæ•°æ®å°†è¢«åˆ é™¤ã€‚</p><h4 id="ç»‘å®šæŒ‚è½½-bind-mount" tabindex="-1"><a class="header-anchor" href="#ç»‘å®šæŒ‚è½½-bind-mount" aria-hidden="true">#</a> ç»‘å®šæŒ‚è½½ï¼ˆbind mountï¼‰</h4><p>ç»‘å®šæŒ‚è½½é€‚ç”¨ä»¥ä¸‹åœºæ™¯ï¼š</p><ul><li>å°†é…ç½®æ–‡ä»¶ä»ä¸»æœºå…±äº«åˆ°å®¹å™¨ã€‚</li><li>åœ¨ Docker ä¸»æœºä¸Šçš„å¼€å‘ç¯å¢ƒå’Œå®¹å™¨ä¹‹é—´å…±äº«æºä»£ç æˆ–ç¼–è¯‘ç›®å½•ã€‚ <ul><li>ä¾‹å¦‚ï¼Œå¯ä»¥å°† Maven çš„ <code>target/</code> ç›®å½•æŒ‚è½½åˆ°å®¹å™¨ä¸­ï¼Œæ¯æ¬¡åœ¨ä¸»æœºä¸Šç”¨ Maven æ‰“åŒ…é¡¹ç›®æ—¶ï¼Œå®¹å™¨å†…éƒ½å¯ä»¥ä½¿ç”¨æ–°ç¼–è¯‘çš„ç¨‹åºåŒ…ã€‚</li></ul></li></ul><h5 id="v" tabindex="-1"><a class="header-anchor" href="#v" aria-hidden="true">#</a> -v</h5><p>ç»‘å®šæŒ‚è½½å°†ä¸»æœºä¸Šçš„ç›®å½•æˆ–è€…æ–‡ä»¶è£…è½½åˆ°å®¹å™¨ä¸­ã€‚ç»‘å®šæŒ‚è½½ä¼šè¦†ç›–å®¹å™¨ä¸­çš„ç›®å½•æˆ–æ–‡ä»¶ã€‚</p><p>å¦‚æœå®¿ä¸»æœºç›®å½•ä¸å­˜åœ¨ï¼Œdocker ä¼šè‡ªåŠ¨åˆ›å»ºè¿™ä¸ªç›®å½•ã€‚ä½†æ˜¯ docker åªè‡ªåŠ¨åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œä¸ä¼šåˆ›å»ºæ–‡ä»¶ã€‚</p><p>ä¾‹å¦‚ï¼Œmysql çš„é…ç½®æ–‡ä»¶å’Œæ•°æ®å­˜å‚¨ç›®å½•ä½¿ç”¨ä¸»æœºçš„ç›®å½•ã€‚å¯ä»¥å°†é…ç½®æ–‡ä»¶è®¾ç½®ä¸ºåªè¯»ï¼ˆread-onlyï¼‰é˜²æ­¢å®¹å™¨æ›´æ”¹ä¸»æœºä¸­çš„æ–‡ä»¶ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
           <span class="token parameter variable">-v</span> /home/mysql/mysql.cnf:/etc/mysql/conf.d/mysql.cnf:ro  <span class="token punctuation">\</span>
           <span class="token parameter variable">-v</span> /home/mysql/data:/var/lib/mysql  <span class="token punctuation">\</span>
           <span class="token parameter variable">-d</span> mysql:5.7 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="tmpfs-ä¸´æ—¶æŒ‚è½½" tabindex="-1"><a class="header-anchor" href="#tmpfs-ä¸´æ—¶æŒ‚è½½" aria-hidden="true">#</a> --tmpfs ä¸´æ—¶æŒ‚è½½</h5><p>ä¸´æ—¶æŒ‚è½½å°†æ•°æ®ä¿ç•™åœ¨ä¸»æœºå†…å­˜ä¸­ï¼Œå½“å®¹å™¨åœæ­¢æ—¶ï¼Œæ–‡ä»¶å°†è¢«åˆ é™¤ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-it</span> <span class="token parameter variable">--tmpfs</span> /tmp nginx:1.22-alpine
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="volume-å·" tabindex="-1"><a class="header-anchor" href="#volume-å·" aria-hidden="true">#</a> volume å·</h4><p>å·æ˜¯ docker å®¹å™¨å­˜å‚¨æ•°æ®çš„é¦–é€‰æ–¹å¼ï¼Œå·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p><ul><li>å·å¯ä»¥åœ¨å¤šä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨ä¹‹é—´å…±äº«æ•°æ®ã€‚ä»…å½“æ˜¾å¼åˆ é™¤å·æ—¶ï¼Œæ‰ä¼šåˆ é™¤å·ã€‚</li><li>å½“ä½ æƒ³è¦å°†å®¹å™¨æ•°æ®å­˜å‚¨åœ¨å¤–éƒ¨ç½‘ç»œå­˜å‚¨ä¸Šæˆ–äº‘æä¾›å•†ä¸Šï¼Œè€Œä¸æ˜¯æœ¬åœ°æ—¶ã€‚</li><li>å·æ›´å®¹æ˜“å¤‡ä»½æˆ–è¿ç§»ï¼Œå½“æ‚¨éœ€è¦å¤‡ä»½ã€è¿˜åŸæ•°æ®æˆ–å°†æ•°æ®ä»ä¸€ä¸ª Docker ä¸»æœºè¿ç§»åˆ°å¦ä¸€ä¸ª Docker ä¸»æœºæ—¶ï¼Œå·æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</li></ul><h4 id="åˆ›å»ºå’ŒæŒ‚è½½å·" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºå’ŒæŒ‚è½½å·" aria-hidden="true">#</a> åˆ›å»ºå’ŒæŒ‚è½½å·</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">## åˆ›å»ºæŒ‚è½½å·</span>
<span class="token function">docker</span> volume create my-data

<span class="token comment">## è¿è¡Œå®¹å™¨</span>
<span class="token function">docker</span> run <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
           <span class="token parameter variable">-v</span> /home/mysql/conf.d/my.cnf:/etc/mysql/conf.d/my.cnf:ro  <span class="token punctuation">\</span>
           <span class="token parameter variable">-v</span> my-data:/var/lib/mysql  <span class="token punctuation">\</span>
           <span class="token parameter variable">-d</span> mysql:5.7 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ›å»º nfs å·</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> volume create <span class="token parameter variable">--driver</span> <span class="token builtin class-name">local</span> <span class="token punctuation">\</span>
    <span class="token parameter variable">--opt</span> <span class="token assign-left variable">type</span><span class="token operator">=</span>nfs <span class="token punctuation">\</span>
    <span class="token parameter variable">--opt</span> <span class="token assign-left variable">o</span><span class="token operator">=</span>addr<span class="token operator">=</span><span class="token number">192.168</span>.1.1,rw <span class="token punctuation">\</span>
    <span class="token parameter variable">--opt</span> <span class="token assign-left variable">device</span><span class="token operator">=</span>:/path/to/dir <span class="token punctuation">\</span>
    vol-nfs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-å‚è€ƒæ–‡æ¡£" tabindex="-1"><a class="header-anchor" href="#_2-å‚è€ƒæ–‡æ¡£" aria-hidden="true">#</a> 2.å‚è€ƒæ–‡æ¡£</h3><ul><li><a href="https://docs.docker.com/storage/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/storage/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://docs.docker.com/storage/bind-mounts/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/storage/bind-mounts/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://docs.docker.com/storage/tmpfs/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/storage/tmpfs/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://docs.docker.com/storage/volumes/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/storage/volumes/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://docs.docker.com/engine/reference/commandline/volume_create/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/engine/reference/commandline/volume_create/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="å…­ã€éƒ¨ç½²è‡ªå·±çš„åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#å…­ã€éƒ¨ç½²è‡ªå·±çš„åº”ç”¨" aria-hidden="true">#</a> å…­ã€éƒ¨ç½²è‡ªå·±çš„åº”ç”¨</h2><p>æœ¬ä¾‹å­æˆ‘ä»¬ä½¿ç”¨ docker æ¥éƒ¨ç½²ä¸€ä¸ªåº”ç”¨ç³»ç»Ÿï¼ŒRuoYi æ˜¯ä¸€æ¬¾ç”¨ java ç¼–å†™çš„ï¼ŒåŸºäº SpringBoot+Bootstrap çš„åå°ç®¡ç†ç³»ç»Ÿã€‚</p><p>RuoYi å®˜æ–¹æ–‡æ¡£ï¼š<a href="http://doc.ruoyi.vip/ruoyi/" target="_blank" rel="noopener noreferrer">http://doc.ruoyi.vip/ruoyi/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>æºç ä¸‹è½½ï¼š<a href="https://gitee.com/y_project/RuoYi/tree/v4.7.4/" target="_blank" rel="noopener noreferrer">https://gitee.com/y_project/RuoYi/tree/v4.7.4/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>å°†æºç ç¼–è¯‘æ‰“åŒ…æˆ <code>ruoyi-admin.jar</code> æ–‡ä»¶ï¼Œæ”¾åˆ°å®¿ä¸»æœº <code>/home/app</code> ç›®å½•ä¸‹ï¼Œ<code>/home/app/sql</code> ç›®å½•ä¸‹æ˜¯æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ã€‚</p><p>é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹äº†ç«¯å£ã€æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># application.yml</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token comment"># æœåŠ¡å™¨çš„ HTTP ç«¯å£ï¼Œé»˜è®¤ä¸º 80</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>

<span class="token punctuation">---</span>
<span class="token comment"># application-druid.yml</span>
  <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//ruoyi<span class="token punctuation">-</span>db<span class="token punctuation">:</span>3306/ry<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=utf8</span>
  <span class="token key atrule">username</span><span class="token punctuation">:</span> root
  <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‡†å¤‡å·¥ä½œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">## åˆ›å»ºå­˜å‚¨å·</span>
<span class="token function">docker</span> volume create ruoyi-data
<span class="token comment">## åˆ›å»ºç½‘ç»œ</span>
<span class="token function">docker</span> network create ruoyi-net
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-éƒ¨ç½²-mysql-å¹¶åˆå§‹åŒ–æ•°æ®åº“" tabindex="-1"><a class="header-anchor" href="#_1-éƒ¨ç½²-mysql-å¹¶åˆå§‹åŒ–æ•°æ®åº“" aria-hidden="true">#</a> 1.éƒ¨ç½² mysql å¹¶åˆå§‹åŒ–æ•°æ®åº“</h3><p>æˆ‘ä»¬åœ¨åˆ›å»ºæ•°æ®åº“å®¹å™¨çš„æ—¶å€™ï¼Œéœ€è¦åšä¸‰ä»¶äº‹ï¼š</p><ul><li>åˆ›å»ºæ•°æ®åº“ <code>ry</code></li><li>è®¾ç½®å­—ç¬¦é›†ä¸º <code>utf-8</code></li><li>æ‰§è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬</li></ul><p>ä½¿ç”¨ <code>MYSQL_DATABASE</code> ç¯å¢ƒå˜é‡åˆ›å»ºæ•°æ®åº“</p><p>è®¾ç½®å­—ç¬¦é›† <code>--character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci</code></p><p>å®¹å™¨ä½¿ç”¨ <code>/docker-entrypoint-initdb.d</code> ç›®å½•ä¸‹çš„è„šæœ¬åˆå§‹åŒ–æ•°æ®åº“ï¼Œè„šæœ¬å¯ä»¥æ˜¯ <code>.sh</code>ï¼Œ<code>.sql</code> å’Œ <code>.sql.gz</code> è¿™ä¸‰ç§æ ¼å¼ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
<span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_DATABASE</span><span class="token operator">=</span>ry <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /home/app/sql:/docker-entrypoint-initdb.d <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> ruoyi-data:/var/lib/mysql  <span class="token punctuation">\</span>
<span class="token parameter variable">--network</span> ruoyi-net <span class="token punctuation">\</span>
<span class="token parameter variable">--name</span> ruoyi-db <span class="token punctuation">\</span>
<span class="token parameter variable">-d</span> mysql:5.7 <span class="token punctuation">\</span>
--character-set-server<span class="token operator">=</span>utf8mb4 --collation-server<span class="token operator">=</span>utf8mb4_unicode_ci
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-éƒ¨ç½²åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#_2-éƒ¨ç½²åº”ç”¨" aria-hidden="true">#</a> 2.éƒ¨ç½²åº”ç”¨</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">8080</span>:8080 <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /home/app/ruoyi-admin.jar:/usr/local/src/ruoyi-admin.jar <span class="token punctuation">\</span>
<span class="token parameter variable">--network</span> ruoyi-net <span class="token punctuation">\</span>
<span class="token parameter variable">--name</span> ruoyi-java <span class="token punctuation">\</span>
<span class="token parameter variable">-d</span> openjdk:8u342-jre <span class="token punctuation">\</span>
<span class="token function">java</span> <span class="token parameter variable">-jar</span> /usr/local/src/ruoyi-admin.jar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-è§£å†³ä¹±ç é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_3-è§£å†³ä¹±ç é—®é¢˜" aria-hidden="true">#</a> 3.è§£å†³ä¹±ç é—®é¢˜</h3><p>ä¹±ç é—®é¢˜æ˜¯å®¹å™¨ä¸­ mysql é»˜è®¤å­—ç¬¦é›†å¼•èµ·çš„ï¼Œæˆ‘ä»¬éœ€è¦å°†é»˜è®¤å­—ç¬¦é›†æ”¹ä¸º utf8mb4ã€‚</p><p>å‚è€ƒï¼š<a href="https://github.com/docker-library/mysql/issues/131" target="_blank" rel="noopener noreferrer">https://github.com/docker-library/mysql/issues/131<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>å¯ä»¥è¿›å…¥å®¹å™¨ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ•°æ®åº“å­—ç¬¦é›†</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">## è¿›å…¥å®¹å™¨</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> ruoyi-db mysql <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p</span>

<span class="token operator">&gt;</span> show variables like <span class="token string">&#39;%character%&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>æ³¨æ„</strong></p><p>ç”±äºåˆ é™¤å®¹å™¨ä¸ä¼šåˆ é™¤å­˜å‚¨å·ï¼Œä¿®æ”¹å­—ç¬¦é›†éœ€è¦åˆ é™¤å­˜å‚¨å·ï¼Œä¸ç„¶å·²ç»å¯¼å…¥çš„æ•°æ®å­—ç¬¦é›†ä¸ä¼šå‘ç”Ÿæ”¹å˜</p></blockquote><p>åˆ é™¤å®¹å™¨å’Œå·</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> stop ruoyi-db
<span class="token function">docker</span> <span class="token function">rm</span> ruoyi-db
<span class="token function">docker</span> volume <span class="token function">rm</span> ruoyi-data
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§è§£å†³æ–¹æ³•</p><h4 id="ä¿®æ”¹è¿è¡Œå‚æ•°" tabindex="-1"><a class="header-anchor" href="#ä¿®æ”¹è¿è¡Œå‚æ•°" aria-hidden="true">#</a> ä¿®æ”¹è¿è¡Œå‚æ•°</h4><p>ä½¿ç”¨ç¯å¢ƒå˜é‡ <code>LANG=C.UTF-8</code> è®¾ç½®å®¢æˆ·ç«¯å­—ç¬¦é›†</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
<span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_DATABASE</span><span class="token operator">=</span>ry <span class="token punctuation">\</span>
<span class="token parameter variable">-e</span> <span class="token assign-left variable"><span class="token environment constant">LANG</span></span><span class="token operator">=</span>C.UTF-8 <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /home/app/sql:/docker-entrypoint-initdb.d <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> ruoyi-data:/var/lib/mysql  <span class="token punctuation">\</span>
<span class="token parameter variable">--network</span> ruoyi-net <span class="token punctuation">\</span>
<span class="token parameter variable">--name</span> ruoyi-db <span class="token punctuation">\</span>
<span class="token parameter variable">-d</span> mysql:5.7 <span class="token punctuation">\</span>
--character-set-server<span class="token operator">=</span>utf8mb4 --collation-server<span class="token operator">=</span>utf8mb4_unicode_ci
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æˆ–è€…</strong></p><p>ä½¿ç”¨ <code>--skip-character-set-client-handshake</code> å¿½ç•¥å®¢æˆ·ç«¯å­—ç¬¦é›†ï¼Œä½¿ç”¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å­—ç¬¦é›†ä¸€è‡´ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run  <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
<span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_DATABASE</span><span class="token operator">=</span>ry <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /home/app/sql:/docker-entrypoint-initdb.d <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> ruoyi-data:/var/lib/mysql  <span class="token punctuation">\</span>
<span class="token parameter variable">--network</span> ruoyi-net <span class="token punctuation">\</span>
<span class="token parameter variable">--name</span> ruoyi-db <span class="token punctuation">\</span>
<span class="token parameter variable">-d</span> mysql:5.7 <span class="token punctuation">\</span>
--skip-character-set-client-handshake --character-set-server<span class="token operator">=</span>utf8mb4 --collation-server<span class="token operator">=</span>utf8mb4_unicode_ci 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä¿®æ”¹é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" aria-hidden="true">#</a> ä¿®æ”¹é…ç½®æ–‡ä»¶</h4><p>ä¿®æ”¹ <code>/home/mysql/mysql.cnf</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
character-set-server<span class="token operator">=</span>utf8mb4
collation-server<span class="token operator">=</span>utf8mb4_general_ci
init-connect<span class="token operator">=</span><span class="token string">&#39;SET NAMES utf8mb4&#39;</span>

<span class="token punctuation">[</span>client<span class="token punctuation">]</span>
default-character-set<span class="token operator">=</span>utf8mb4

<span class="token punctuation">[</span>mysql<span class="token punctuation">]</span>
default-character-set<span class="token operator">=</span>utf8mb4
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†é…ç½®æ–‡ä»¶æŒ‚è½½åˆ°å®¹å™¨ä¸­</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
<span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_DATABASE</span><span class="token operator">=</span>ry <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /home/mysql/mysql.cnf:/etc/mysql/conf.d/mysql.cnf:ro  <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /home/app/sql:/docker-entrypoint-initdb.d <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> ruoyi-data:/var/lib/mysql  <span class="token punctuation">\</span>
<span class="token parameter variable">--network</span> ruoyi-net <span class="token punctuation">\</span>
<span class="token parameter variable">--name</span> ruoyi-db <span class="token punctuation">\</span>
<span class="token parameter variable">-d</span> mysql:5.7 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-å‚è€ƒæ–‡æ¡£-3" tabindex="-1"><a class="header-anchor" href="#_4-å‚è€ƒæ–‡æ¡£-3" aria-hidden="true">#</a> 4.å‚è€ƒæ–‡æ¡£</h3><ul><li><a href="https://mariadb.com/kb/en/setting-character-sets-and-collations/" target="_blank" rel="noopener noreferrer">https://mariadb.com/kb/en/setting-character-sets-and-collations/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="ä¸ƒã€docker-compose-å®¹å™¨ç¼–æ’" tabindex="-1"><a class="header-anchor" href="#ä¸ƒã€docker-compose-å®¹å™¨ç¼–æ’" aria-hidden="true">#</a> ä¸ƒã€docker compose å®¹å™¨ç¼–æ’</h2><p>åœ¨å®é™…å·¥ä½œä¸­ï¼Œéƒ¨ç½²ä¸€ä¸ªåº”ç”¨å¯èƒ½éœ€è¦éƒ¨ç½²å¤šä¸ªå®¹å™¨ï¼Œä¸€ä¸ªä¸€ä¸ªéƒ¨ç½²éå¸¸ä¸æ–¹ä¾¿ã€‚docker compose å¯ä»¥ä¸€é”®éƒ¨ç½²å’Œå¯åŠ¨å¤šä¸ªå®¹å™¨ï¼Œå®ƒä½¿ç”¨ yaml æ–‡ä»¶æ¥ç¼–æ’æœåŠ¡ã€‚</p><p>github å’Œ docker hub å¾ˆå¤šé¡¹ç›®éƒ½æä¾›äº† <code>docker-compose.yaml</code> æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€é”®éƒ¨ç½²é¡¹ç›®ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p><h3 id="_1-ä¸€é”®éƒ¨ç½²-wordpress" tabindex="-1"><a class="header-anchor" href="#_1-ä¸€é”®éƒ¨ç½²-wordpress" aria-hidden="true">#</a> 1.ä¸€é”®éƒ¨ç½² wordpress</h3><p><a href="https://hub.docker.com/_/wordpress" target="_blank" rel="noopener noreferrer">wordpress<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ˜¯ä¸€ä¸ªè‘—åçš„å¼€æºåšå®¢ç³»ç»Ÿã€‚</p><p>å°†ä»¥ä¸‹å†…å®¹ä¿å­˜åˆ°æœ¬åœ°çš„ <code>docker-compose.yml</code> æ–‡ä»¶ä¸­ã€‚</p><p><code>docker compose</code> å‘½ä»¤å¯åŠ¨æ—¶ï¼Œé»˜è®¤åœ¨å½“å‰ç›®å½•ä¸‹å¯»æ‰¾ <code>compose.yaml</code> æˆ– <code>compose.yml</code>ï¼Œä¸ºäº†å…¼å®¹ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œä¹Ÿä¼šæŸ¥æ‰¾ <code>docker-compose.yaml</code> æˆ– <code>docker-compose.yml</code>ã€‚</p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>-f</code> å‚æ•°æ‰‹åŠ¨æŒ‡å®šæ–‡ä»¶ <code>docker compose -f docker-compose-dev.yml up -d</code> ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>version: <span class="token string">&#39;3.1&#39;</span>

services:
  wordpress:
    image: wordpress
    restart: always
    ports:
      - <span class="token number">8080</span>:80
    environment:
      WORDPRESS_DB_HOST: db
      WORDPRESS_DB_USER: exampleuser
      WORDPRESS_DB_PASSWORD: examplepass
      WORDPRESS_DB_NAME: exampledb
    volumes:
      - wordpress:/var/www/html

  db:
    image: mysql:5.7
    restart: always
    environment:
      MYSQL_DATABASE: exampledb
      MYSQL_USER: exampleuser
      MYSQL_PASSWORD: examplepass
      MYSQL_RANDOM_ROOT_PASSWORD: <span class="token string">&#39;1&#39;</span>
    volumes:
      - db:/var/lib/mysql

volumes:
  wordpress:
  db:
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">## ä¸€é”®éƒ¨ç½²å¯åŠ¨</span>
<span class="token function">docker</span> compose up <span class="token parameter variable">-d</span>
<span class="token comment">## å¯åŠ¨/åœæ­¢æœåŠ¡</span>
<span class="token function">docker</span> compose start/stop 
<span class="token comment">## åœæ­¢å¹¶åˆ é™¤å®¹å™¨ï¼Œä¸ä¼šåˆ é™¤å­˜å‚¨å· volume</span>
<span class="token function">docker</span> compose down 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-compose-æ–‡ä»¶ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_2-compose-æ–‡ä»¶ç»“æ„" aria-hidden="true">#</a> 2.compose æ–‡ä»¶ç»“æ„</h3><p><code>docker-compose.yml</code> é€šå¸¸éœ€è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªé¡¶çº§å…ƒç´ ï¼š</p><ul><li><strong>version</strong> å·²å¼ƒç”¨ï¼Œæ—©æœŸç‰ˆæœ¬éœ€è¦æ­¤å…ƒç´ ã€‚</li><li><strong>services</strong> å¿…è¦å…ƒç´ ï¼Œå®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨çš„è¿è¡Œå‚æ•°ï¼Œåœ¨ services ä¸­å¯ä»¥é€šè¿‡ä»¥ä¸‹å…ƒç´ å®šä¹‰å®¹å™¨çš„è¿è¡Œå‚æ•° <ul><li><strong>image</strong> å®¹å™¨é•œåƒ</li><li><strong>ports</strong> ç«¯å£æ˜ å°„</li><li><strong>environment</strong> ç¯å¢ƒå˜é‡</li><li><strong>networks</strong> å®¹å™¨ä½¿ç”¨çš„ç½‘ç»œ</li><li><strong>volumes</strong> å®¹å™¨æŒ‚è½½çš„å­˜å‚¨å·</li><li><strong>command</strong> å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤</li><li><strong>depends_on</strong> å®šä¹‰å¯åŠ¨é¡ºåºï¼Œå¤æ•°å½¢å¼ï¼ˆä¾‹å¦‚ portsï¼Œnetworksï¼Œvolumesï¼Œdepends_onï¼‰å‚æ•°éœ€è¦ä¼ å…¥åˆ—è¡¨</li></ul></li><li><strong>networks</strong> åˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œ</li><li><strong>volumes</strong> åˆ›å»ºå­˜å‚¨å·</li></ul><h3 id="_3-yaml-æ–‡ä»¶è¯­æ³•" tabindex="-1"><a class="header-anchor" href="#_3-yaml-æ–‡ä»¶è¯­æ³•" aria-hidden="true">#</a> 3.yaml æ–‡ä»¶è¯­æ³•</h3><ul><li>ç¼©è¿›ä»£è¡¨ä¸Šä¸‹çº§å…³ç³»</li><li><strong>ç¼©è¿›æ—¶ä¸å…è®¸ä½¿ç”¨ Tab é”®ï¼Œåªå…è®¸ä½¿ç”¨ç©ºæ ¼</strong></li><li><code>:</code> é”®å€¼å¯¹ï¼Œåé¢å¿…é¡»æœ‰ç©ºæ ¼</li><li><code>-</code> åˆ—è¡¨ï¼Œåé¢å¿…é¡»æœ‰ç©ºæ ¼</li><li><code>[ ]</code> æ•°ç»„</li><li><code>#</code> æ³¨é‡Š</li><li><code>{key:value, k1:v1}</code> é”®å€¼å¯¹</li><li><code>|</code> å¤šè¡Œæ–‡æœ¬å— å¦‚æœä¸€ä¸ªæ–‡ä»¶ä¸­åŒ…å«å¤šä¸ªæ–‡æ¡£</li><li><code>---</code> è¡¨ç¤ºä¸€ä¸ªæ–‡æ¡£çš„å¼€å§‹</li></ul><p><strong>è¿˜æœ‰ä¸€ç§å¸¸è§çš„ç”¨æ³•</strong>ï¼š</p><p>æŠŠå…¬å…±çš„é…ç½®æå–å‡ºæ¥ï¼Œç”¨ <code>&amp;</code> æ¥å»ºç«‹é”šç‚¹ï¼Œ<code>&lt;&lt;</code> åˆå¹¶åˆ°å½“å‰æ•°æ®ï¼Œç”¨ <code>*</code> å¼•ç”¨é”šç‚¹ï¼Œä¾‹å¦‚ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.7&#39;</span>

<span class="token comment"># Settings and configurations that are common for all containers</span>
<span class="token key atrule">x-minio-common</span><span class="token punctuation">:</span> <span class="token important">&amp;minio-common</span>
  <span class="token key atrule">image</span><span class="token punctuation">:</span> quay.io/minio/minio<span class="token punctuation">:</span>RELEASE.2022<span class="token punctuation">-</span>08<span class="token punctuation">-</span>13T21<span class="token punctuation">-</span>54<span class="token punctuation">-</span>44Z
  <span class="token key atrule">command</span><span class="token punctuation">:</span> server <span class="token punctuation">-</span><span class="token punctuation">-</span>console<span class="token punctuation">-</span>address &quot;<span class="token punctuation">:</span>9001&quot; http<span class="token punctuation">:</span>//minio<span class="token punctuation">{</span>1<span class="token punctuation">...</span>2<span class="token punctuation">}</span>/data<span class="token punctuation">{</span>1<span class="token punctuation">...</span>2<span class="token punctuation">}</span>
  <span class="token key atrule">expose</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token string">&quot;9000&quot;</span>
    <span class="token punctuation">-</span> <span class="token string">&quot;9001&quot;</span>
  
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">minio1</span><span class="token punctuation">:</span>
    <span class="token key atrule">&lt;&lt;</span><span class="token punctuation">:</span> <span class="token important">*minio-common</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> data1<span class="token punctuation">-</span>1<span class="token punctuation">:</span>/data1
      <span class="token punctuation">-</span> data1<span class="token punctuation">-</span>2<span class="token punctuation">:</span>/data2

  <span class="token key atrule">minio2</span><span class="token punctuation">:</span>
    <span class="token key atrule">&lt;&lt;</span><span class="token punctuation">:</span> <span class="token important">*minio-common</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> data2<span class="token punctuation">-</span>1<span class="token punctuation">:</span>/data1
      <span class="token punctuation">-</span> data2<span class="token punctuation">-</span>2<span class="token punctuation">:</span>/data2

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">data1-1</span><span class="token punctuation">:</span>
  <span class="token key atrule">data1-2</span><span class="token punctuation">:</span>
  <span class="token key atrule">data2-1</span><span class="token punctuation">:</span>
  <span class="token key atrule">data2-2</span><span class="token punctuation">:</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-ç¼–æ’è‡ªå·±çš„é¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#_4-ç¼–æ’è‡ªå·±çš„é¡¹ç›®" aria-hidden="true">#</a> 4.ç¼–æ’è‡ªå·±çš„é¡¹ç›®</h3><p>ä»¥ ruoyi é¡¹ç›®ä¸ºä¾‹å­ï¼Œå…ˆé‡‡ç”¨æŒ‚è½½ç›®å½•çš„æ–¹å¼éƒ¨ç½²åº”ç”¨ï¼Œç­‰æˆ‘ä»¬å­¦å®Œ <code>dockerfile</code> æ‰“åŒ…ï¼Œå°±å¯ä»¥å®Œæ•´çš„éƒ¨ç½²åº”ç”¨äº†ã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.1&#39;</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>    
  <span class="token key atrule">ruoyi-app</span><span class="token punctuation">:</span>
    <span class="token comment">#  docker run --name ruoyi-app      \</span>
    <span class="token comment">#             -p 8080:8080        \</span>
    <span class="token comment">#             --network ruoyi-net      \</span>
    <span class="token comment">#             -v /home/app/ruoyi-admin.jar:/usr/local/src/ruoyi-admin.jar   \</span>
    <span class="token comment">#             -d openjdk:8u342-jre    \</span>
    <span class="token comment">#             java -jar /usr/local/src/ruoyi-admin.jar</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> openjdk<span class="token punctuation">:</span>8u342<span class="token punctuation">-</span>jre
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8080<span class="token punctuation">:</span><span class="token number">8080</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /home/app/ruoyi<span class="token punctuation">-</span>admin.jar<span class="token punctuation">:</span>/usr/local/src/ruoyi<span class="token punctuation">-</span>admin.jar
    <span class="token key atrule">command</span><span class="token punctuation">:</span> java <span class="token punctuation">-</span>jar /usr/local/src/ruoyi<span class="token punctuation">-</span>admin.jar
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ruoyi<span class="token punctuation">-</span>net
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ruoyi<span class="token punctuation">-</span>db
  
  <span class="token key atrule">ruoyi-db</span><span class="token punctuation">:</span>
    <span class="token comment">#  docker run --name ruoyi-db -p 3303:3306 \</span>
    <span class="token comment">#             --network ruoyi-net        \</span>
    <span class="token comment">#             -v ruoyi-data:/var/lib/mysql  \</span>
    <span class="token comment">#             -v /home/app/sql:/docker-entrypoint-initdb.d   \</span>
    <span class="token comment">#             -e MYSQL_DATABASE=ry         \</span>
    <span class="token comment">#             -e MYSQL_ROOT_PASSWORD=123456    \</span>
    <span class="token comment">#             -d mysql:5.7      \</span>
    <span class="token comment">#             --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci --skip-character-set-client-handshake</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span><span class="token number">5.7</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span> 
      <span class="token punctuation">-</span> MYSQL_ROOT_PASSWORD=123456
      <span class="token punctuation">-</span> MYSQL_DATABASE=ry
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;--character-set-server=utf8mb4&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;--collation-server=utf8mb4_general_ci&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;--skip-character-set-client-handshake&quot;</span>
      <span class="token punctuation">]</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /home/app/sql<span class="token punctuation">:</span>/docker<span class="token punctuation">-</span>entrypoint<span class="token punctuation">-</span>initdb.d
      <span class="token punctuation">-</span> ruoyi<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/var/lib/mysql
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ruoyi<span class="token punctuation">-</span>net

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">ruoyi-data</span><span class="token punctuation">:</span>

<span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token key atrule">ruoyi-net</span><span class="token punctuation">:</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>command</code> æ”¯æŒä»¥ä¸‹å†™æ³•ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># æ¨èä½¿ç”¨æ•°ç»„æˆ–åˆ—è¡¨çš„æ–¹å¼</span>
<span class="token comment"># æ•°ç»„</span>
<span class="token key atrule">command</span><span class="token punctuation">:</span>
  <span class="token punctuation">[</span><span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span>
   <span class="token string">&quot;-jar&quot;</span><span class="token punctuation">,</span>
   <span class="token string">&quot;/usr/local/src/ruoyi-admin.jar&quot;</span>
  <span class="token punctuation">]</span>
<span class="token comment"># åˆ—è¡¨</span>
<span class="token key atrule">command</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> java
    <span class="token punctuation">-</span> <span class="token punctuation">-</span>jar
    <span class="token punctuation">-</span> /usr/local/src/ruoyi<span class="token punctuation">-</span>admin.jar

<span class="token comment"># shellå‘½ä»¤æ¨¡å¼</span>
<span class="token key atrule">command</span><span class="token punctuation">:</span> java <span class="token punctuation">-</span>jar /usr/local/src/ruoyi<span class="token punctuation">-</span>admin.jar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡Œå¤æ‚çš„è„šæœ¬</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">command</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> bash
  <span class="token punctuation">-</span> <span class="token string">&quot;-c&quot;</span>
  <span class="token punctuation">-</span> <span class="token punctuation">|</span><span class="token scalar string">
    set -ex
    # Generate mysql server-id from pod ordinal index.
    [[ `hostname` =~ -([0-9]+)$ ]] || exit 1
    ordinal=${BASH_REMATCH[1]}
    echo [mysqld] &gt; /mnt/conf.d/server-id.cnf
    # Add an offset to avoid reserved server-id=0 value.
    echo server-id=$((100 + $ordinal)) &gt;&gt; /mnt/conf.d/server-id.cnf
    # Copy appropriate conf.d files from config-map to emptyDir.
    if [[ $ordinal -eq 0 ]]; then
      cp /mnt/config-map/primary.cnf /mnt/conf.d/
    else
      cp /mnt/config-map/replica.cnf /mnt/conf.d/
    fi</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>environment</code> æ”¯æŒå¦‚ä¸‹ä¸¤ç§å†™æ³•</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># ä½¿ç”¨map</span>
<span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token key atrule">MYSQL_DATABASE</span><span class="token punctuation">:</span> exampledb
    <span class="token key atrule">MYSQL_USER</span><span class="token punctuation">:</span> exampleuser
    <span class="token key atrule">MYSQL_PASSWORD</span><span class="token punctuation">:</span> examplepass
    <span class="token key atrule">MYSQL_RANDOM_ROOT_PASSWORD</span><span class="token punctuation">:</span> <span class="token string">&#39;1&#39;</span>

<span class="token comment">#ä½¿ç”¨åˆ—è¡¨</span>
<span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> MYSQL_ROOT_PASSWORD=123456
    <span class="token punctuation">-</span> MYSQL_DATABASE=ry
    <span class="token punctuation">-</span> LANG=C.UTF<span class="token punctuation">-</span><span class="token number">8</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-å®¹å™¨å¯åŠ¨é¡ºåº-depends-on" tabindex="-1"><a class="header-anchor" href="#_5-å®¹å™¨å¯åŠ¨é¡ºåº-depends-on" aria-hidden="true">#</a> 5.å®¹å™¨å¯åŠ¨é¡ºåº depends_on</h3><p>æ•°æ®åº“åˆå§‹åŒ–å®Œæˆä¹‹å‰ï¼Œä¸ä¼šå»ºç«‹ connectionsã€‚</p><figure><img src="/assets/docker-use-guide-7-df74a022.png" alt="MySQL åˆå§‹åŒ–" tabindex="0" loading="lazy"><figcaption>MySQL åˆå§‹åŒ–</figcaption></figure><p><code>depends_on</code> åªèƒ½ä¿è¯å®¹å™¨çš„å¯åŠ¨å’Œé”€æ¯é¡ºåºï¼Œä¸èƒ½ç¡®ä¿ä¾èµ–çš„å®¹å™¨æ˜¯å¦ readyã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3.9&quot;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">web</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> .
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> db
      <span class="token punctuation">-</span> redis
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis
  <span class="token key atrule">db</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> postgres
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>depends_on</code> åªèƒ½ä¿è¯ <code>web</code> å®¹å™¨åœ¨ <code>db</code>ï¼Œ<code>redis</code> ä¹‹åå¯åŠ¨ï¼Œä¸ä¼šå…³æ³¨ä»–ä»¬çš„çŠ¶æ€æ˜¯å¦å¯åŠ¨å®Œæˆæˆ–å‡†å¤‡å°±ç»ªã€‚</p><p>è¦ç¡®ä¿åº”ç”¨æœåŠ¡åœ¨æ•°æ®åº“åˆå§‹åŒ–å®Œæˆåå†å¯åŠ¨ï¼Œéœ€è¦é…åˆ <a href="https://docs.docker.com/compose/compose-file/#depends_on" target="_blank" rel="noopener noreferrer">condition<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å’Œ <a href="https://docs.docker.com/compose/compose-file/#healthcheck" target="_blank" rel="noopener noreferrer">healthcheck<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ä½¿ç”¨ã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">web</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> .
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token key atrule">db</span><span class="token punctuation">:</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> service_healthy
      <span class="token key atrule">redis</span><span class="token punctuation">:</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> service_started
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis
  <span class="token key atrule">db</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> postgres
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>condition</code> æœ‰ä¸‰ç§çŠ¶æ€ï¼š</p><ul><li><code>service_started</code>ï¼šå®¹å™¨å·²å¯åŠ¨</li><li><code>service_healthy</code>ï¼šå®¹å™¨å¤„äºå¥åº·çŠ¶æ€</li><li><code>service_completed_successfully</code>ï¼šå®¹å™¨æ‰§è¡Œå®Œæˆä¸”æˆåŠŸé€€å‡ºï¼ˆé€€å‡ºçŠ¶æ€ç ä¸º 0ï¼‰</li></ul><p>æˆ‘ä»¬æ¥æ”¹é€ ä¸€ä¸‹æˆ‘ä»¬è‡ªå·±çš„ <code>docker-compose.yaml</code> æ–‡ä»¶ï¼Œå®Œæ•´ä¾‹å­å¦‚ä¸‹ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">services</span><span class="token punctuation">:</span> 

  <span class="token key atrule">ruoyi-app</span><span class="token punctuation">:</span>
    <span class="token comment">#  docker run --name ruoyi-app      \</span>
    <span class="token comment">#             -p 8080:8080        \</span>
    <span class="token comment">#             --network ruoyi-net      \</span>
    <span class="token comment">#             -v /home/app/ruoyi-admin.jar:/usr/local/src/ruoyi-admin.jar   \</span>
    <span class="token comment">#             -d openjdk:8u342-jre    \</span>
    <span class="token comment">#             java -jar /usr/local/src/ruoyi-admin.jar</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> openjdk<span class="token punctuation">:</span>8u342<span class="token punctuation">-</span>jre
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8080<span class="token punctuation">:</span><span class="token number">8080</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ruoyi<span class="token punctuation">-</span>net
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /home/app/ruoyi<span class="token punctuation">-</span>admin.jar<span class="token punctuation">:</span>/usr/local/src/ruoyi<span class="token punctuation">-</span>admin.jar
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-jar&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/usr/local/src/ruoyi-admin.jar&quot;</span> <span class="token punctuation">]</span>
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;CMD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;curl&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-f&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://localhost:8080&quot;</span><span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 10s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 5s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">5</span>
      <span class="token key atrule">start_period</span><span class="token punctuation">:</span> 10s
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token key atrule">ruoyi-db</span><span class="token punctuation">:</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> service_healthy

  <span class="token key atrule">ruoyi-db</span><span class="token punctuation">:</span>
    <span class="token comment">#  docker run --name ruoyi-db -p 3303:3306 \</span>
    <span class="token comment">#             --network ruoyi-net        \</span>
    <span class="token comment">#             -v ruoyi-data:/var/lib/mysql  \</span>
    <span class="token comment">#             -v /home/app/sql:/docker-entrypoint-initdb.d   \</span>
    <span class="token comment">#             -e MYSQL_DATABASE=ry         \</span>
    <span class="token comment">#             -e MYSQL_ROOT_PASSWORD=123456    \</span>
    <span class="token comment">#             -d mysql:5.7      \</span>
    <span class="token comment">#             --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci --skip-character-set-client-handshake</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span><span class="token number">5.7</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> MYSQL_DATABASE=ry
      <span class="token punctuation">-</span> MYSQL_ROOT_PASSWORD=123456
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ruoyi<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/var/lib/mysql
      <span class="token punctuation">-</span> /home/app/sql<span class="token punctuation">:</span>/docker<span class="token punctuation">-</span>entrypoint<span class="token punctuation">-</span>initdb.d
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ruoyi<span class="token punctuation">-</span>net
    <span class="token key atrule">command</span><span class="token punctuation">:</span>
      <span class="token punctuation">[</span>
        <span class="token string">&quot;--character-set-server=utf8mb4&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;--collation-server=utf8mb4_unicode_ci&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;--skip-character-set-client-handshake&quot;</span>
      <span class="token punctuation">]</span>
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;CMD&quot;</span><span class="token punctuation">,</span> <span class="token string">&#39;mysqladmin&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ping&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;-h&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;-u&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;-p$$MYSQL_ROOT_PASSWORD&#39;</span><span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 10s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 5s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">5</span>
      <span class="token key atrule">start_period</span><span class="token punctuation">:</span> 10s

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">ruoyi-data</span><span class="token punctuation">:</span>

<span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token key atrule">ruoyi-net</span><span class="token punctuation">:</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-å‚è€ƒæ–‡æ¡£" tabindex="-1"><a class="header-anchor" href="#_6-å‚è€ƒæ–‡æ¡£" aria-hidden="true">#</a> 6.å‚è€ƒæ–‡æ¡£</h3><ul><li><a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/compose/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://docs.docker.com/compose/compose-file/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/compose/compose-file/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://docs.docker.com/compose/compose-file/#depends_on" target="_blank" rel="noopener noreferrer">https://docs.docker.com/compose/compose-file/#depends_on<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://docs.docker.com/compose/startup-order/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/compose/startup-order/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="å…«ã€dockerfile-åˆ¶ä½œé•œåƒ" tabindex="-1"><a class="header-anchor" href="#å…«ã€dockerfile-åˆ¶ä½œé•œåƒ" aria-hidden="true">#</a> å…«ã€dockerfile åˆ¶ä½œé•œåƒ</h2><h3 id="_1-dockerfile" tabindex="-1"><a class="header-anchor" href="#_1-dockerfile" aria-hidden="true">#</a> 1.dockerfile</h3><p>dockerfile é€šå¸¸åŒ…å«ä»¥ä¸‹å‡ ä¸ªå¸¸ç”¨å‘½ä»¤ï¼š</p><div class="language-docker line-numbers-mode" data-ext="docker"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">FROM</span> ubuntu:18.04</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
<span class="token instruction"><span class="token keyword">COPY</span> . .</span>
<span class="token instruction"><span class="token keyword">RUN</span> make .</span>
<span class="token instruction"><span class="token keyword">CMD</span> python app.py</span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> 80</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>FROM</code>ï¼šæ‰“åŒ…ä½¿ç”¨çš„åŸºç¡€é•œåƒ</li><li><code>WORKDIR</code>ï¼šç›¸å½“äº <code>cd</code> å‘½ä»¤ï¼Œè¿›å…¥å·¥ä½œç›®å½•</li><li><code>COPY</code>ï¼šå°†å®¿ä¸»æœºçš„æ–‡ä»¶å¤åˆ¶åˆ°å®¹å™¨å†…</li><li><code>RUN</code>ï¼šæ‰“åŒ…æ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼Œç›¸å½“äºæ‰“åŒ…è¿‡ç¨‹ä¸­åœ¨å®¹å™¨ä¸­æ‰§è¡Œ shell è„šæœ¬ï¼Œé€šå¸¸ç”¨æ¥å®‰è£…åº”ç”¨ç¨‹åºæ‰€éœ€è¦çš„ä¾èµ–ã€è®¾ç½®æƒé™ã€åˆå§‹åŒ–é…ç½®æ–‡ä»¶ç­‰</li><li><code>CMD</code>ï¼šè¿è¡Œé•œåƒæ—¶æ‰§è¡Œçš„å‘½ä»¤</li><li><code>EXPOSE</code>ï¼šæŒ‡å®šå®¹å™¨åœ¨è¿è¡Œæ—¶ç›‘å¬çš„ç½‘ç»œç«¯å£ï¼Œå®ƒå¹¶ä¸ä¼šå…¬å¼€ç«¯å£ï¼Œä»…èµ·åˆ°å£°æ˜çš„ä½œç”¨ï¼Œå…¬å¼€ç«¯å£éœ€è¦å®¹å™¨è¿è¡Œæ—¶ä½¿ç”¨ <code>-p</code> å‚æ•°æŒ‡å®šã€‚</li></ul><h3 id="_2-åˆ¶ä½œè‡ªå·±çš„é•œåƒ" tabindex="-1"><a class="header-anchor" href="#_2-åˆ¶ä½œè‡ªå·±çš„é•œåƒ" aria-hidden="true">#</a> 2.åˆ¶ä½œè‡ªå·±çš„é•œåƒ</h3><p>å‚è€ƒæˆ‘ä»¬ä¹‹å‰çš„é…ç½®ï¼Œåˆ¶ä½œ dockerfile æ–‡ä»¶</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code>  <span class="token key atrule">ruoyi-java</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> openjdk<span class="token punctuation">:</span>8u342<span class="token punctuation">-</span>jre
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8080<span class="token punctuation">:</span><span class="token number">8080</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /home/app/ruoyi<span class="token punctuation">-</span>admin.jar<span class="token punctuation">:</span>/usr/local/src/ruoyi<span class="token punctuation">-</span>admin.jar
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-jar&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/usr/local/src/ruoyi-admin.jar&quot;</span> <span class="token punctuation">]</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ruoyi<span class="token punctuation">-</span>net
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ruoyi<span class="token punctuation">-</span>db
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¼–å†™ dockerfile æ–‡ä»¶</p><div class="language-docker line-numbers-mode" data-ext="docker"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">FROM</span> openjdk:8u342-jre</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
<span class="token instruction"><span class="token keyword">COPY</span> ./ruoyi-admin.jar .</span>
<span class="token instruction"><span class="token keyword">CMD</span> [ <span class="token string">&quot;java&quot;</span>, <span class="token string">&quot;-jar&quot;</span>, <span class="token string">&quot;ruoyi-admin.jar&quot;</span> ]</span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> 8080</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>docker build .</code> æ‰“åŒ…</p><figure><img src="/assets/docker-use-guide-8-5207ee9d.png" alt="Docker æ„å»ºé•œåƒ" tabindex="0" loading="lazy"><figcaption>Docker æ„å»ºé•œåƒ</figcaption></figure><p><code>docker images</code> æŸ¥çœ‹é•œåƒ id</p><figure><img src="/assets/docker-use-guide-9-4bc8734d.png" alt="æŸ¥çœ‹é•œåƒ" tabindex="0" loading="lazy"><figcaption>æŸ¥çœ‹é•œåƒ</figcaption></figure><p><code>docker tag 79d007b05ff6 ruoyi-app:4.7.4-jar</code> è®¾ç½®é•œåƒçš„æ ‡ç­¾</p><h3 id="_3-image-é•œåƒä¸-layer-å±‚" tabindex="-1"><a class="header-anchor" href="#_3-image-é•œåƒä¸-layer-å±‚" aria-hidden="true">#</a> 3.image é•œåƒä¸ layer å±‚</h3><p>image æ–‡ä»¶ç”±ä¸€ç³»åˆ—å±‚æ„å»ºè€Œæˆï¼Œdockerfile æ¯ä¸€ä¸ªå‘½ä»¤éƒ½ä¼šç”Ÿæˆä¸€ä¸ªå±‚ã€‚æ¯ä¸€å±‚éƒ½æ˜¯åªè¯»çš„ã€‚</p><p>ä¾‹å¦‚å‰é¢æˆ‘ä»¬åˆ¶ä½œé•œåƒï¼Œå°±äº§ç”Ÿäº† 4 ä¸ªå±‚ã€‚</p><figure><img src="/assets/docker-use-guide-8-5207ee9d.png" alt="é•œåƒæ„å»º" tabindex="0" loading="lazy"><figcaption>é•œåƒæ„å»º</figcaption></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>docker image history ruoyi-java:4.7.4</code> å‘½ä»¤æŸ¥çœ‹</p><figure><img src="/assets/docker-use-guide-12-6057288f.png" alt="æŸ¥çœ‹é•œåƒæ„å»ºå†å²" tabindex="0" loading="lazy"><figcaption>æŸ¥çœ‹é•œåƒæ„å»ºå†å²</figcaption></figure><p>åˆ›å»ºå®¹å™¨æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯å†™å±‚ï¼Œé€šå¸¸ç§°ä¸º â€œå®¹å™¨å±‚â€ã€‚å¯¹æ­£åœ¨è¿è¡Œçš„å®¹å™¨æ‰€åšçš„æ‰€æœ‰æ›´æ”¹ï¼ˆå¦‚å†™å…¥æ–°æ–‡ä»¶ã€ä¿®æ”¹ç°æœ‰æ–‡ä»¶å’Œåˆ é™¤æ–‡ä»¶ï¼‰éƒ½å°†å†™å…¥å®¹å™¨å±‚ï¼Œè€Œä¸ä¼šä¿®æ”¹é•œåƒã€‚</p><figure><img src="/assets/docker-use-guide-13-463ebbcf.png" alt="é•œåƒåˆ†å±‚" tabindex="0" loading="lazy"><figcaption>é•œåƒåˆ†å±‚</figcaption></figure><h3 id="_4-å¤šé˜¶æ®µæ„å»º" tabindex="-1"><a class="header-anchor" href="#_4-å¤šé˜¶æ®µæ„å»º" aria-hidden="true">#</a> 4.å¤šé˜¶æ®µæ„å»º</h3><p>åœ¨æ„å»ºåŸºäº Java çš„åº”ç”¨ç¨‹åºæ—¶ï¼Œéœ€è¦ä¸€ä¸ª JDK å°†æºä»£ç ç¼–è¯‘ä¸º Java å­—èŠ‚ç ã€‚ä½†æ˜¯ï¼Œåœ¨ç”Ÿäº§ä¸­ä¸éœ€è¦è¯¥ JDKã€‚å¤šé˜¶æ®µæ„å»ºå¯ä»¥å°†ç”Ÿæˆæ—¶ä¾èµ–ä¸è¿è¡Œæ—¶ä¾èµ–åˆ†å¼€ï¼Œå‡å°æ•´ä¸ª image æ–‡ä»¶å¤§å°ã€‚</p><h4 id="maven-tomcat-ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#maven-tomcat-ç¤ºä¾‹" aria-hidden="true">#</a> Maven/Tomcat ç¤ºä¾‹</h4><p>ä½¿ç”¨ Maven æ¥æ„å»ºåº”ç”¨ï¼Œåœ¨æœ€ç»ˆçš„ image ä¸­ä¸éœ€è¦åŒ…å« mavenã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šé˜¶æ®µæ„å»ºï¼Œæ¯ä¸€ä¸ªé˜¶æ®µä» FROM å¼€å§‹ï¼Œæœ€ç»ˆçš„ image åªä¼šä»æœ€åä¸€ä¸ªé˜¶æ®µæ„å»ºï¼Œä¸ä¼šåŒ…å«å‰é¢é˜¶æ®µäº§ç”Ÿçš„å±‚ï¼Œå› æ­¤å¯ä»¥å‡å°‘é•œåƒä½“ç§¯ã€‚</p><div class="language-docker line-numbers-mode" data-ext="docker"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">FROM</span> maven <span class="token keyword">AS</span> build</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> /source</span>
<span class="token instruction"><span class="token keyword">COPY</span> . .</span>
<span class="token instruction"><span class="token keyword">RUN</span> mvn package</span>

<span class="token instruction"><span class="token keyword">FROM</span>  openjdk:8u342-jre</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
<span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">build</span></span> /source/ruoyi-admin/target/ruoyi-admin.jar .</span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> 80</span>
<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> [<span class="token string">&quot;java&quot;</span>,<span class="token string">&quot;-jar&quot;</span>,<span class="token string">&quot;ruoyi-admin.jar&quot;</span>]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>docker build -t ruoyi-jar:4.7.4 .</code></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># project name</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;app&quot;</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>

  <span class="token key atrule">ruoyi-java</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> ruoyi<span class="token punctuation">-</span>jar<span class="token punctuation">:</span>4.7.4
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;--server.port=8080&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;--ruoyi.profile=/home/ruoyi/uploadPath&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;--spring.datasource.druid.master.url=jdbc:mysql://ruoyi-db:3306/ry?useUnicode=true&amp;characterEncoding=utf8&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;--spring.datasource.druid.master.username=root&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;--spring.datasource.druid.master.password=123456&quot;</span>
    <span class="token punctuation">]</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8080<span class="token punctuation">:</span><span class="token number">8080</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ruoyi<span class="token punctuation">-</span>net
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;CMD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;curl&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-f&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://localhost:8080&quot;</span> <span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 10s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 5s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">5</span>
      <span class="token key atrule">start_period</span><span class="token punctuation">:</span> 10s
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token key atrule">ruoyi-db</span><span class="token punctuation">:</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> service_healthy

  <span class="token key atrule">ruoyi-db</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span><span class="token number">5.7</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> MYSQL_ROOT_PASSWORD=123456
      <span class="token punctuation">-</span> MYSQL_DATABASE=ry
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;--character-set-server=utf8mb4&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;--collation-server=utf8mb4_general_ci&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;--skip-character-set-client-handshake&quot;</span>
    <span class="token punctuation">]</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /home/app/sql<span class="token punctuation">:</span>/docker<span class="token punctuation">-</span>entrypoint<span class="token punctuation">-</span>initdb.d
      <span class="token punctuation">-</span> ruoyi<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/var/lib/mysql
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ruoyi<span class="token punctuation">-</span>net
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;CMD&quot;</span><span class="token punctuation">,</span> <span class="token string">&#39;mysqladmin&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ping&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;-h&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;-u&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;-p$$MYSQL_ROOT_PASSWORD&#39;</span> <span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 10s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 5s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">5</span>
      <span class="token key atrule">start_period</span><span class="token punctuation">:</span> 10s

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">ruoyi-data</span><span class="token punctuation">:</span>

<span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token key atrule">ruoyi-net</span><span class="token punctuation">:</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="entrypoint-å’Œ-cmd-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#entrypoint-å’Œ-cmd-çš„åŒºåˆ«" aria-hidden="true">#</a> <code>ENTRYPOINT</code> å’Œ <code>CMD</code> çš„åŒºåˆ«</h4><p><code>dockerfile</code> åº”è¯¥è‡³å°‘åŒ…å«ä¸€ä¸ª <code>ENTRYPOINT</code> æˆ– <code>CMD</code>ã€‚</p><p><code>ENTRYPOINT</code> æŒ‡å®šå®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„é»˜è®¤ç¨‹åºï¼Œä¸€èˆ¬è¿è¡Œå®¹å™¨æ—¶ä¸ä¼šè¢«æ›¿æ¢æˆ–è¦†ç›–ã€‚</p><p>é™¤éä½¿ç”¨ <code>--entrypoint</code> è¿›è¡ŒæŒ‡å®šã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">--entrypoint</span> /bin/bash redis 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>CMD</code> å¯ä»¥åœ¨å¯åŠ¨å®¹å™¨æ—¶è¢«æ›¿æ¢å’Œè¦†ç›–ã€‚</p><p>ä¾‹å¦‚ <code>docker run -it --rm mysql:5.7 /bin/bash</code></p><p>å¦‚æœé•œåƒä¸­ <code>ENTRYPOINT</code> å’Œ <code>CMD</code> éƒ½å­˜åœ¨ï¼Œåˆ™ <code>CMD</code> å°†ä½œä¸º <code>ENTRYPOINT</code> çš„å‚æ•°ä½¿ç”¨ã€‚</p><h3 id="_5-å‚è€ƒæ–‡æ¡£" tabindex="-1"><a class="header-anchor" href="#_5-å‚è€ƒæ–‡æ¡£" aria-hidden="true">#</a> 5.å‚è€ƒæ–‡æ¡£</h3><ul><li><a href="https://docs.docker.com/get-started/09_image_best/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/get-started/09_image_best/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://docs.docker.com/language/java/build-images/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/language/java/build-images/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://docs.docker.com/storage/storagedriver/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/storage/storagedriver/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/develop/develop-images/dockerfile_best-practices/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://docs.docker.com/engine/reference/run/#cmd-default-command-or-options" target="_blank" rel="noopener noreferrer">https://docs.docker.com/engine/reference/run/#cmd-default-command-or-options<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="ä¹ã€ç§æœ‰ä»“åº“" tabindex="-1"><a class="header-anchor" href="#ä¹ã€ç§æœ‰ä»“åº“" aria-hidden="true">#</a> ä¹ã€ç§æœ‰ä»“åº“</h2><h3 id="_1-docker-registry" tabindex="-1"><a class="header-anchor" href="#_1-docker-registry" aria-hidden="true">#</a> 1.docker registry</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>docker push</code> å°†è‡ªå·±çš„ image æ¨é€åˆ° docker hub ä¸­è¿›è¡Œå…±äº«ï¼Œä½†æ˜¯åœ¨å®é™…å·¥ä½œä¸­ï¼Œå¾ˆå¤šå…¬å¸çš„ä»£ç ä¸èƒ½ä¸Šä¼ åˆ°å…¬å¼€çš„ä»“åº“ä¸­ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åˆ›å»ºè‡ªå·±çš„é•œåƒä»“åº“ã€‚</p><p>docker å®˜ç½‘æä¾›äº†ä¸€ä¸ª docker registry çš„ç§æœ‰ä»“åº“é¡¹ç›®ï¼Œå¯ä»¥æ–¹ä¾¿çš„é€šè¿‡ docker éƒ¨ç½²ã€‚</p><p><code>docker run -d -p 5000:5000 --restart always --name registry registry:2</code></p><p><code>docker image tag ruoyi-java:4.7.4 localhost:5000/ruoyi-java:4.7.4</code></p><p><code>docker push localhost:5000/ruoyi-java:4.7.4</code></p><p><code>docker pull localhost:5000/ruoyi-java:4.7.4</code></p><p>å¦‚æœé‡åˆ°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure><img src="/assets/docker-use-guide-14-57534394.png" alt="æ„å»ºå¼‚å¸¸" tabindex="0" loading="lazy"><figcaption>æ„å»ºå¼‚å¸¸</figcaption></figure><p>è¿™æ˜¯å› ä¸º <code>docker push</code> é»˜è®¤ä½¿ç”¨ <code>HTTPS</code> åè®®ï¼Œè€ŒæœåŠ¡ç«¯çš„ <code>registry</code> ä»“åº“ä½¿ç”¨çš„æ˜¯ <code>HTTP</code>ã€‚</p><p>è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦ä¿®æ”¹ <code>/etc/docker/daemon.json</code>ï¼ŒåŠ å…¥</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;insecure-registries&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;192.168.56.108:5000&quot;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2-harbor" tabindex="-1"><a class="header-anchor" href="#_2-harbor" aria-hidden="true">#</a> 2.harbor</h3><p>habor æ˜¯ä¸€ä¸ªåŠŸèƒ½æ›´å¼ºå¤§é•œåƒä»“åº“ï¼Œå®ƒå…·æœ‰å®Œæ•´çš„æƒé™æ§åˆ¶å’Œ Web ç•Œé¢ï¼Œæ›´ç¬¦åˆæˆ‘ä»¬çš„å®é™…å·¥ä½œåœºæ™¯ã€‚</p><p>ä¸‹è½½ bitname å‘å¸ƒçš„ harbor é•œåƒé…ç½®åŒ…ï¼š<a href="https://github.com/bitnami/containers/archive/main.tar.gz" target="_blank" rel="noopener noreferrer">https://github.com/bitnami/containers/archive/main.tar.gz<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> harbor
<span class="token function">tar</span> xzvf containers-main.tar.gz
<span class="token builtin class-name">cd</span> containers-main/bitnami/harbor-portal
<span class="token function">docker</span> compose up <span class="token parameter variable">-d</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµè§ˆå™¨è®¿é—®ï¼š<a href="http://192.168.56.108" target="_blank" rel="noopener noreferrer">http://192.168.56.108<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œé»˜è®¤ç”¨æˆ·å/å¯†ç ï¼š<code>admin/bitnami</code></p><figure><img src="/assets/docker-use-guide-15-6feb642d.png" alt="Harbor" tabindex="0" loading="lazy"><figcaption>Harbor</figcaption></figure><h3 id="_3-ä¿å­˜ä¸åŠ è½½é•œåƒ" tabindex="-1"><a class="header-anchor" href="#_3-ä¿å­˜ä¸åŠ è½½é•œåƒ" aria-hidden="true">#</a> 3.ä¿å­˜ä¸åŠ è½½é•œåƒ</h3><p>å½“æˆ‘ä»¬å¤„äºç¦»çº¿çŠ¶æ€ï¼Œæ¯”å¦‚åœ¨å¾ˆå¤šå†…ç½‘ä¸Šä¸èƒ½è®¿é—®äº’è”ç½‘ï¼Œè¿™æ—¶å€™ä¸èƒ½é€šè¿‡é•œåƒä»“åº“çš„æ–¹å¼å…±äº«é•œåƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¯¼å‡ºå’Œå¯¼å…¥åŠŸèƒ½ï¼Œæ‰‹åŠ¨æ‹·è´é•œåƒã€‚</p><ul><li><code>docker save</code>ï¼šä¼šåŒ…å«æ‰€æœ‰å±‚ï¼Œä»¥åŠæ‰€æœ‰æ ‡ç­¾ + ç‰ˆæœ¬ä¿¡æ¯ã€‚</li><li><code>docker save alpine:3.15 &gt; alpine-3.15.tar</code>ï¼šä¿å­˜é•œåƒ</li><li><code>docker rmi alpine:3.15</code>ï¼šåˆ é™¤æœ¬åœ°é•œåƒ</li><li><code>docker load &lt; alpine-3.15.tar</code>ï¼šåŠ è½½é•œåƒ</li></ul><blockquote><p><strong>è¯´æ˜</strong></p><ul><li>ä¸è¦è·Ÿ <code>export</code> å’Œ <code>import</code> å‘½ä»¤æ··æ·†</li><li><code>docker save/load IMAGE</code>ï¼š<code>save</code> å’Œ <code>load</code> æ“ä½œçš„æ˜¯é•œåƒ</li><li><code>docker export/import CONTAINER</code>ï¼š<code>export</code> å’Œ <code>import</code> æ“ä½œå¯¹è±¡æ˜¯å®¹å™¨</li><li>é•œåƒåŒ…å«å¤šä¸ªå±‚ï¼Œæ¯ä¸€å±‚éƒ½ä¸å¯å˜ï¼Œsave ä¿å­˜çš„ä¿¡æ¯åŒ…å«æ¯ä¸ªå±‚å’Œæ‰€æœ‰æ ‡ç­¾ + ç‰ˆæœ¬ä¿¡æ¯ã€‚</li><li>å®¹å™¨è¿è¡Œçš„æ—¶å€™ä¼šåˆ›å»ºä¸€ä¸ªå¯å†™å…¥çš„å®¹å™¨å±‚ï¼Œæ‰€æœ‰çš„æ›´æ”¹éƒ½å†™å…¥å®¹å™¨å±‚ï¼Œexport å¯¼å‡ºçš„åªæœ‰å®¹å™¨å±‚ï¼Œä¸åŒ…å«çˆ¶å±‚å’Œæ ‡ç­¾ä¿¡æ¯ã€‚</li></ul><figure><img src="/assets/docker-use-guide-13-463ebbcf.png" alt="é•œåƒåˆ†å±‚" tabindex="0" loading="lazy"><figcaption>é•œåƒåˆ†å±‚</figcaption></figure></blockquote><h2 id="åã€windows-å®‰è£…-docker" tabindex="-1"><a class="header-anchor" href="#åã€windows-å®‰è£…-docker" aria-hidden="true">#</a> åã€windows å®‰è£… docker</h2><blockquote><ul><li><p><strong>Docker Engine</strong> æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„ dockerï¼Œæ˜¯æŒ‡ Docker Engineï¼Œå®ƒæ˜¯ä¸€ç§å®¹å™¨åŒ–æŠ€æœ¯ï¼Œç”¨äºåˆ›å»ºå’Œè¿è¡Œå®¹å™¨ã€‚</p></li><li><p><strong>Docker Desktop</strong> Docker Desktop æ˜¯ä¸€ä¸ªç”¨äºæ“ä½œ dockerçš„ GUI å›¾å½¢ç•Œé¢åŒ–å·¥å…·ï¼Œå®ƒåŒ…å« Docker Engineã€‚<br></p></li></ul></blockquote><h3 id="_1-windows-ä¸‹å®‰è£…-docker-desktop" tabindex="-1"><a class="header-anchor" href="#_1-windows-ä¸‹å®‰è£…-docker-desktop" aria-hidden="true">#</a> 1.Windows ä¸‹å®‰è£… Docker Desktop</h3><blockquote><p><strong>æ³¨æ„</strong></p><ol><li>å¦‚æœæ˜¯ Windows 7ã€Windows8 ç”¨æˆ·ï¼Œæ¨èåœ¨è™šæ‹Ÿæœºä¸­å®‰è£… dockerã€‚</li></ol></blockquote><h4 id="ç³»ç»Ÿç‰ˆæœ¬è¦æ±‚" tabindex="-1"><a class="header-anchor" href="#ç³»ç»Ÿç‰ˆæœ¬è¦æ±‚" aria-hidden="true">#</a> ç³»ç»Ÿç‰ˆæœ¬è¦æ±‚</h4><p>åœ¨ PowerShell ä¸­ä½¿ç”¨ <code>winver</code> å‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬</p><ul><li>Windows 11</li><li>Windows 10 21H1 æˆ–æ›´é«˜ç‰ˆæœ¬</li></ul><h4 id="å¿…è¦æ¡ä»¶" tabindex="-1"><a class="header-anchor" href="#å¿…è¦æ¡ä»¶" aria-hidden="true">#</a> å¿…è¦æ¡ä»¶</h4><ol><li>åœ¨ â€œä»»åŠ¡ç®¡ç†å™¨â€ çš„ â€œæ€§èƒ½â€ é€‰é¡¹é‡ŒæŸ¥çœ‹è™šæ‹ŸåŒ–æ˜¯å¦å¯ç”¨ã€‚å¦‚æœæ²¡æœ‰ï¼Œéœ€è¦åœ¨ BIOS ä¸­å¼€å¯ã€‚</li></ol><figure><img src="/assets/docker-use-guide-16-9f03daa6.png" alt="ä»»åŠ¡ç®¡ç†å™¨" tabindex="0" loading="lazy"><figcaption>ä»»åŠ¡ç®¡ç†å™¨</figcaption></figure><ol start="2"><li>å®‰è£…â€œè™šæ‹Ÿæœºå¹³å°â€å’Œ WSL</li></ol><figure><img src="/assets/docker-use-guide-17-98e1ecc6.png" alt="æ§åˆ¶é¢æ¿" tabindex="0" loading="lazy"><figcaption>æ§åˆ¶é¢æ¿</figcaption></figure><p>æˆ–è€…ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Enable-WindowsOptionalFeature <span class="token parameter variable">-Online</span> <span class="token parameter variable">-FeatureName</span> VirtualMachinePlatform <span class="token parameter variable">-All</span> <span class="token parameter variable">-NoRestart</span>
Enable-WindowsOptionalFeature <span class="token parameter variable">-Online</span> <span class="token parameter variable">-FeatureName</span> Microsoft-Windows-Subsystem-Linux <span class="token parameter variable">-All</span> <span class="token parameter variable">-NoRestart</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>è®¾ç½® Hypervisor å¼€æœºè‡ªåŠ¨å¯åŠ¨</li></ol><p>ä¸€äº›ç¨‹åºï¼ˆä¾‹å¦‚æ—§ç‰ˆæœ¬çš„ Virtual Box æˆ–æŸäº›æ¸¸æˆï¼‰ä¼šç¦ç”¨ Hypervisor è‡ªåŠ¨å¯åŠ¨ï¼Œå¯èƒ½ä¼šä½¿ docker æ— æ³•æ­£å¸¸è¿è¡Œã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>bcdedit /set hypervisorlaunchtype auto
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="4"><li>å®‰è£… WSL2 å†…æ ¸æ›´æ–°åŒ…</li></ol><ul><li><a href="https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi" target="_blank" rel="noopener noreferrer">é€‚ç”¨äº x64 è®¡ç®—æœºçš„ WSL2 Linux å†…æ ¸æ›´æ–°åŒ…<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><ol start="5"><li>å°† WSL 2 è®¾ç½®ä¸ºé»˜è®¤ç‰ˆæœ¬</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>wsl --set-default-version <span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>é‡å¯ç³»ç»Ÿã€‚</p><h4 id="å®‰è£…-docker-desktop" tabindex="-1"><a class="header-anchor" href="#å®‰è£…-docker-desktop" aria-hidden="true">#</a> å®‰è£… Docker Desktop</h4><p>ä¸‹è½½ <a href="https://desktop.docker.com/win/main/amd64/Docker%20Desktop%20Installer.exe" target="_blank" rel="noopener noreferrer">Docker Desktop for Windows<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> è¿›è¡Œå®‰è£…ã€‚å‡ºç°ä»¥ä¸‹ç•Œé¢ï¼Œå®‰è£…æˆåŠŸã€‚</p><figure><img src="/assets/docker-use-guide-18-36008e01.png" alt="Docker Desktop for Window" tabindex="0" loading="lazy"><figcaption>Docker Desktop for Window</figcaption></figure><h4 id="é…ç½®é•œåƒç«™" tabindex="-1"><a class="header-anchor" href="#é…ç½®é•œåƒç«™" aria-hidden="true">#</a> é…ç½®é•œåƒç«™</h4><p>ç”±äºè®¿é—® docker hub ç½‘ç»œæ¯”è¾ƒæ…¢ï¼Œå› æ­¤éœ€è¦é…ç½®å›½å†…çš„å®¹å™¨ä»“åº“é•œåƒç«™ã€‚</p><figure><img src="/assets/docker-use-guide-19-0e10f6d6.png" alt="é…ç½®é•œåƒç«™" tabindex="0" loading="lazy"><figcaption>é…ç½®é•œåƒç«™</figcaption></figure><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;builder&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;gc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;defaultKeepStorage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;20GB&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;enabled&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;experimental&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;features&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;buildkit&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;registry-mirrors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;https://reg-mirror.qiniu.com/&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;https://docker.mirrors.ustc.edu.cn/&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;https://hub-mirror.c.163.com/&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#_2-æ³¨æ„äº‹é¡¹" aria-hidden="true">#</a> 2.æ³¨æ„äº‹é¡¹</h3><ul><li><strong>æŒ‚è½½è·¯å¾„</strong></li></ul><blockquote><p><strong>æ³¨æ„</strong>ï¼šwindows ä¸‹è·¯å¾„ä½¿ç”¨ <code>\</code> ä½œä¸ºåˆ†å‰²ç¬¦</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">--rm</span> <span class="token parameter variable">-it</span> <span class="token parameter variable">-v</span> D:<span class="token punctuation">\</span>docker<span class="token punctuation">\</span>data1:/work1 alpine
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æˆ–è€…é‡‡ç”¨ Linux è·¯å¾„å†™æ³•</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">--rm</span> <span class="token parameter variable">-it</span> <span class="token parameter variable">-v</span> /D/docker/data2:/work2 alpine
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><strong>dockerfile æ¢è¡Œç¬¦</strong></li></ul><p>Docker å®¹å™¨åŸºäº Linux è¿è¡Œç¯å¢ƒï¼Œå®¹å™¨å†…æ–‡ä»¶å¿…é¡»ä½¿ç”¨ Linux æ ·å¼çš„æ¢è¡Œç¬¦ <code>\n</code>ï¼Œä¸èƒ½ä½¿ç”¨ windows æ¢è¡Œç¬¦ <code>\r\n</code>ã€‚</p><p>ä¾‹å¦‚ dockerfile æ–‡ä»¶ï¼Œwindows ä¸‹çš„ä¸€äº›å·¥å…·ä¼šé»˜è®¤ä½¿ç”¨ windows æ¢è¡Œç¬¦ï¼Œå¯èƒ½å¯¼è‡´è¿™äº›æ–‡ä»¶åœ¨å®¹å™¨ä¸­æ˜¾ç¤ºè¯­æ³•é”™è¯¯ã€‚</p><h3 id="_3-å‚è€ƒæ–‡æ¡£" tabindex="-1"><a class="header-anchor" href="#_3-å‚è€ƒæ–‡æ¡£" aria-hidden="true">#</a> 3.å‚è€ƒæ–‡æ¡£</h3><ul><li><a href="https://docs.docker.com/desktop/windows/wsl/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/desktop/windows/wsl/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://docs.microsoft.com/zh-cn/windows/wsl/install-manual" target="_blank" rel="noopener noreferrer">https://docs.microsoft.com/zh-cn/windows/wsl/install-manual<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://docs.docker.com/desktop/troubleshoot/topics/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/desktop/troubleshoot/topics/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://forums.virtualbox.org/viewtopic.php?f=6&amp;t=105951" target="_blank" rel="noopener noreferrer">https://forums.virtualbox.org/viewtopic.php?f=6&amp;t=105951<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://docs.docker.com/desktop/faqs/windowsfaqs/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/desktop/faqs/windowsfaqs/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="åä¸€ã€å®‰è£…-portainer" tabindex="-1"><a class="header-anchor" href="#åä¸€ã€å®‰è£…-portainer" aria-hidden="true">#</a> åä¸€ã€å®‰è£… portainer</h2><h3 id="_1-portainer" tabindex="-1"><a class="header-anchor" href="#_1-portainer" aria-hidden="true">#</a> 1.portainer</h3><p>Portainer æ˜¯ä¸€ä¸ªå¯è§†åŒ–çš„ Docker ç®¡ç†ç³»ç»Ÿï¼ŒåŠŸèƒ½ååˆ†å…¨é¢ï¼Œæä¾›çŠ¶æ€æ˜¾ç¤ºé¢æ¿ã€åº”ç”¨æ¨¡æ¿å¿«é€Ÿéƒ¨ç½²ã€å®¹å™¨é•œåƒã€ç½‘ç»œã€æ•°æ®å·çš„åŸºæœ¬æ“ä½œã€äº‹ä»¶æ—¥å¿—æ˜¾ç¤ºã€å®¹å™¨æ§åˆ¶å°æ“ä½œã€ç™»å½•ç”¨æˆ·ç®¡ç†å’Œæ§åˆ¶ç­‰åŠŸèƒ½ã€‚</p><figure><img src="/assets/docker-use-guide-20-32ff06b4.png" alt="Portainer" tabindex="0" loading="lazy"><figcaption>Portainer</figcaption></figure><h3 id="_2-ä½¿ç”¨-docker-éƒ¨ç½²-portainer" tabindex="-1"><a class="header-anchor" href="#_2-ä½¿ç”¨-docker-éƒ¨ç½²-portainer" aria-hidden="true">#</a> 2.ä½¿ç”¨ docker éƒ¨ç½² portainer</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">## åˆ›å»ºæŒ‚è½½å·</span>
<span class="token function">docker</span> volume create portainer_data

<span class="token comment">## å¯åŠ¨å®¹å™¨</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">8000</span>:8000 <span class="token parameter variable">-p</span> <span class="token number">9443</span>:9443 <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /var/run/docker.sock:/var/run/docker.sock <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> portainer_data:/data <span class="token punctuation">\</span>
<span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token punctuation">\</span>
<span class="token parameter variable">--name</span> portainer portainer/portainer-ce:2.14.2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š<a href="https://xn--IP-wz2c754c5qn:9443/" target="_blank" rel="noopener noreferrer">https://å®¿ä¸»æœºIP:9443/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="_3-é‡å¯ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#_3-é‡å¯ç­–ç•¥" aria-hidden="true">#</a> 3.é‡å¯ç­–ç•¥</h3><p>å®¹å™¨çš„é‡å¯ç­–ç•¥ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">--restart</span><span class="token operator">=</span>always IMAGE:TAG
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p><strong>è¯´æ˜</strong></p><ul><li><code>--restart=no</code> é»˜è®¤ä¸º noï¼Œä¸ä¼šè‡ªåŠ¨é‡å¯å®¹å™¨ã€‚</li><li><code>--restart=always</code> å½“å®¹å™¨åœæ­¢è¿è¡Œæ—¶ï¼Œæ€»æ˜¯é‡å¯å®¹å™¨ã€‚å½“æˆ‘ä»¬é‡å¯ docker è¿›ç¨‹æ—¶ï¼Œä¹Ÿä¼šè‡ªåŠ¨é‡å¯å®¹å™¨ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨ <code>docker stop</code> åœæ­¢å®¹å™¨æ—¶ï¼Œåˆ™ä¸ä¼šè‡ªåŠ¨é‡å¯å®¹å™¨ã€‚</li><li><code>--restart=on-failure:10</code> ä»…å½“å®¹å™¨ä»¥å¼‚å¸¸çŠ¶æ€é€€å‡ºæ—¶ï¼Œæ‰é‡å¯å®¹å™¨ã€‚è‹¥é‡å¯ä¸æˆåŠŸï¼Œæœ€å¤šå°è¯•é‡å¯ 10 æ¬¡ã€‚</li><li><code>--restart=unless-stopped</code> å½“æˆ‘ä»¬é‡å¯ docker æ—¶ï¼Œè‹¥è¿™ä¸ªå®¹å™¨å·²ç»å¤„åœæ­¢çŠ¶æ€ï¼Œåˆ™ä¸è¿›è¡Œè‡ªåŠ¨é‡å¯ã€‚</li></ul></blockquote><h2 id="åäºŒã€å‚è€ƒ" tabindex="-1"><a class="header-anchor" href="#åäºŒã€å‚è€ƒ" aria-hidden="true">#</a> åäºŒã€å‚è€ƒ</h2><ul><li><a href="https://www.yuque.com/wukong-zorrm/xwas40" target="_blank" rel="noopener noreferrer">https://www.yuque.com/wukong-zorrm/xwas40<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><!----><!----></div></footer><nav class="page-nav"><a href="/./guide/develop/deploy-operation/jenkins-use-guide.html" class="nav-link prev" aria-label="Jenkins æŒç»­é›†æˆä½¿ç”¨æŒ‡å—"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><span class="font-icon icon iconfont icon-shell" style=""></span>Jenkins æŒç»­é›†æˆä½¿ç”¨æŒ‡å—</div></a><!----></nav><!----><!----><!--]--></main><!--]--><!----></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/./assets/app-29c27af3.js" defer></script>
  </body>
</html>
